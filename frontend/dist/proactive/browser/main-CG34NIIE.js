var OE=Object.defineProperty,kE=Object.defineProperties;var LE=Object.getOwnPropertyDescriptors;var Wo=Object.getOwnPropertySymbols,FE=Object.getPrototypeOf,yp=Object.prototype.hasOwnProperty,_p=Object.prototype.propertyIsEnumerable,UE=Reflect.get;var vp=(t,e,n)=>e in t?OE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})yp.call(e,n)&&vp(t,n,e[n]);if(Wo)for(var n of Wo(e))_p.call(e,n)&&vp(t,n,e[n]);return t},Z=(t,e)=>kE(t,LE(e));var wp=(t,e)=>{var n={};for(var r in t)yp.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Wo)for(var r of Wo(t))e.indexOf(r)<0&&_p.call(t,r)&&(n[r]=t[r]);return n};var wn=(t,e,n)=>UE(FE(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Ip=null;var jc=1,Ep=Symbol("SIGNAL");function be(t){let e=Ip;return Ip=t,e}var Cp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jE(t){if(!(Bc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jc)){if(!t.producerMustRecompute(t)&&!Vc(t)){t.dirty=!1,t.lastCleanEpoch=jc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=jc}}function Dp(t){return t&&(t.nextProducerIndex=0),be(t)}function bp(t,e){if(be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Bc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$c(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vc(t){zo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(jE(n),r!==n.version))return!0}return!1}function Tp(t){if(zo(t),Bc(t))for(let e=0;e<t.producerNode.length;e++)$c(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function $c(t,e){if(VE(t),zo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)$c(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];zo(i),i.producerIndexOfThis[r]=e}}function Bc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function zo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function VE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function $E(){throw new Error}var BE=$E;function Sp(t){BE=t}function D(t){return typeof t=="function"}function rr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qo=rr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function In(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ee=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(D(r))try{r()}catch(o){e=o instanceof qo?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ap(o)}catch(s){e=e??[],s instanceof qo?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ap(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&In(n,e)}remove(e){let{_finalizers:n}=this;n&&In(n,e),e instanceof t&&e._removeParent(this)}};ee.EMPTY=(()=>{let t=new ee;return t.closed=!0,t})();var Hc=ee.EMPTY;function Go(t){return t instanceof ee||t&&"closed"in t&&D(t.remove)&&D(t.add)&&D(t.unsubscribe)}function Ap(t){D(t)?t():t.unsubscribe()}var Ze={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ir={setTimeout(t,e,...n){let{delegate:r}=ir;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ir;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Yo(t){ir.setTimeout(()=>{let{onUnhandledError:e}=Ze;if(e)e(t);else throw t})}function si(){}var Mp=Wc("C",void 0,void 0);function Np(t){return Wc("E",void 0,t)}function Rp(t){return Wc("N",t,void 0)}function Wc(t,e,n){return{kind:t,value:e,error:n}}var En=null;function or(t){if(Ze.useDeprecatedSynchronousErrorHandling){let e=!En;if(e&&(En={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=En;if(En=null,n)throw r}}else t()}function xp(t){Ze.useDeprecatedSynchronousErrorHandling&&En&&(En.errorThrown=!0,En.error=t)}var Cn=class extends ee{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Go(e)&&e.add(this)):this.destination=zE}static create(e,n,r){return new sr(e,n,r)}next(e){this.isStopped?qc(Rp(e),this):this._next(e)}error(e){this.isStopped?qc(Np(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qc(Mp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HE=Function.prototype.bind;function zc(t,e){return HE.call(t,e)}var Gc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ko(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ko(r)}else Ko(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ko(n)}}},sr=class extends Cn{constructor(e,n,r){super();let i;if(D(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ze.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&zc(e.next,o),error:e.error&&zc(e.error,o),complete:e.complete&&zc(e.complete,o)}):i=e}this.destination=new Gc(i)}};function Ko(t){Ze.useDeprecatedSynchronousErrorHandling?xp(t):Yo(t)}function WE(t){throw t}function qc(t,e){let{onStoppedNotification:n}=Ze;n&&ir.setTimeout(()=>n(t,e))}var zE={closed:!0,next:si,error:WE,complete:si};var ar=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Te(t){return t}function Yc(...t){return Kc(t)}function Kc(t){return t.length===0?Te:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var V=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=GE(n)?n:new sr(n,r,i);return or(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Pp(r),new r((i,o)=>{let s=new sr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ar](){return this}pipe(...n){return Kc(n)(this)}toPromise(n){return n=Pp(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Pp(t){var e;return(e=t??Ze.Promise)!==null&&e!==void 0?e:Promise}function qE(t){return t&&D(t.next)&&D(t.error)&&D(t.complete)}function GE(t){return t&&t instanceof Cn||qE(t)&&Go(t)}function Qc(t){return D(t?.lift)}function U(t){return e=>{if(Qc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,e,n,r,i){return new Zc(t,e,n,r,i)}var Zc=class extends Cn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cr(){return U((t,e)=>{let n=null;t._refCount++;let r=j(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var lr=class extends V{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Qc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ee;let n=this.getSubject();e.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ee.EMPTY)}return e}refCount(){return cr()(this)}};var Op=rr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=(()=>{class t extends V{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Qo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Op}next(n){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hc:(this.currentObservers=null,o.push(n),new ee(()=>{this.currentObservers=null,In(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new V;return n.source=this,n}}return t.create=(e,n)=>new Qo(e,n),t})(),Qo=class extends Se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Hc}};var le=class extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jc={now(){return(Jc.delegate||Date).now()},delegate:void 0};var Zo=class extends ee{constructor(e,n){super()}schedule(e,n=0){return this}};var ai={setInterval(t,e,...n){let{delegate:r}=ai;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ai;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ur=class extends Zo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ai.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ai.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,In(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var dr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};dr.now=Jc.now;var fr=class extends dr{constructor(e,n=dr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xc=new fr(ur);var Jo=class extends ur{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xo=class extends fr{};var el=new Xo(Jo);var Ue=new V(t=>t.complete());function kp(t){return t&&D(t.schedule)}function Lp(t){return t[t.length-1]}function Fp(t){return D(Lp(t))?t.pop():void 0}function zt(t){return kp(Lp(t))?t.pop():void 0}function tl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jp(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Up(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dn(t){return this instanceof Dn?(this.v=t,this):new Dn(t)}function Vp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(g,y){o.push([f,h,g,y])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(g){d(o[0][3],g)}}function c(f){f.value instanceof Dn?Promise.resolve(f.value.v).then(l,u):d(o[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function $p(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Up=="function"?Up(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var es=t=>t&&typeof t.length=="number"&&typeof t!="function";function ts(t){return D(t?.then)}function ns(t){return D(t[ar])}function rs(t){return Symbol.asyncIterator&&D(t?.[Symbol.asyncIterator])}function is(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var os=YE();function ss(t){return D(t?.[os])}function as(t){return Vp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Dn(n.read());if(i)return yield Dn(void 0);yield yield Dn(r)}}finally{n.releaseLock()}})}function cs(t){return D(t?.getReader)}function ae(t){if(t instanceof V)return t;if(t!=null){if(ns(t))return KE(t);if(es(t))return QE(t);if(ts(t))return ZE(t);if(rs(t))return Bp(t);if(ss(t))return JE(t);if(cs(t))return XE(t)}throw is(t)}function KE(t){return new V(e=>{let n=t[ar]();if(D(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QE(t){return new V(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ZE(t){return new V(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Yo)})}function JE(t){return new V(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bp(t){return new V(e=>{eC(t,e).catch(n=>e.error(n))})}function XE(t){return Bp(as(t))}function eC(t,e){var n,r,i,o;return jp(this,void 0,void 0,function*(){try{for(n=$p(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function _e(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function qt(t,e=0){return U((n,r)=>{n.subscribe(j(r,i=>_e(r,t,()=>r.next(i),e),()=>_e(r,t,()=>r.complete(),e),i=>_e(r,t,()=>r.error(i),e)))})}function Gt(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Hp(t,e){return ae(t).pipe(Gt(e),qt(e))}function Wp(t,e){return ae(t).pipe(Gt(e),qt(e))}function zp(t,e){return new V(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qp(t,e){return new V(n=>{let r;return _e(n,e,()=>{r=t[os](),_e(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}function ls(t,e){if(!t)throw new Error("Iterable cannot be null");return new V(n=>{_e(n,e,()=>{let r=t[Symbol.asyncIterator]();_e(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gp(t,e){return ls(as(t),e)}function Yp(t,e){if(t!=null){if(ns(t))return Hp(t,e);if(es(t))return zp(t,e);if(ts(t))return Wp(t,e);if(rs(t))return ls(t,e);if(ss(t))return qp(t,e);if(cs(t))return Gp(t,e)}throw is(t)}function te(t,e){return e?Yp(t,e):ae(t)}function I(...t){let e=zt(t);return te(t,e)}function hr(t,e){let n=D(t)?t:()=>t,r=i=>i.error(n());return new V(e?i=>e.schedule(r,0,i):r)}function nl(t){return!!t&&(t instanceof V||D(t.lift)&&D(t.subscribe))}var St=rr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function F(t,e){return U((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:tC}=Array;function nC(t,e){return tC(e)?t(...e):t(e)}function Kp(t){return F(e=>nC(t,e))}var{isArray:rC}=Array,{getPrototypeOf:iC,prototype:oC,keys:sC}=Object;function Qp(t){if(t.length===1){let e=t[0];if(rC(e))return{args:e,keys:null};if(aC(e)){let n=sC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aC(t){return t&&typeof t=="object"&&iC(t)===oC}function Zp(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function us(...t){let e=zt(t),n=Fp(t),{args:r,keys:i}=Qp(t);if(r.length===0)return te([],e);let o=new V(cC(r,e,i?s=>Zp(i,s):Te));return n?o.pipe(Kp(n)):o}function cC(t,e,n=Te){return r=>{Jp(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Jp(e,()=>{let l=te(t[c],e),u=!1;l.subscribe(j(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Jp(t,e,n){t?_e(n,t,e):e()}function Xp(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=y=>l<r?g(y):c.push(y),g=y=>{o&&e.next(y),l++;let M=!1;ae(n(y,u++)).subscribe(j(e,N=>{i?.(N),o?h(N):e.next(N)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let N=c.shift();s?_e(e,s,()=>g(N)):g(N)}f()}catch(N){e.error(N)}}))};return t.subscribe(j(e,h,()=>{d=!0,f()})),()=>{a?.()}}function re(t,e,n=1/0){return D(e)?re((r,i)=>F((o,s)=>e(r,o,i,s))(ae(t(r,i))),n):(typeof e=="number"&&(n=e),U((r,i)=>Xp(r,i,t,n)))}function rl(t=1/0){return re(Te,t)}function eg(){return rl(1)}function pr(...t){return eg()(te(t,zt(t)))}function ds(t){return new V(e=>{ae(t()).subscribe(e)})}function je(t,e){return U((n,r)=>{let i=0;n.subscribe(j(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Yt(t){return U((e,n)=>{let r=null,i=!1,o;r=e.subscribe(j(n,void 0,void 0,s=>{o=ae(t(s,Yt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function tg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function bn(t,e){return D(e)?re(t,e,1):re(t,1)}function Kt(t){return U((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function At(t){return t<=0?()=>Ue:U((e,n)=>{let r=0;e.subscribe(j(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function il(t){return F(()=>t)}function fs(t=lC){return U((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lC(){return new St}function gr(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Je(t,e){let n=arguments.length>=2;return r=>r.pipe(t?je((i,o)=>t(i,o,r)):Te,At(1),n?Kt(e):fs(()=>new St))}function mr(t){return t<=0?()=>Ue:U((e,n)=>{let r=[];e.subscribe(j(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ol(t,e){let n=arguments.length>=2;return r=>r.pipe(t?je((i,o)=>t(i,o,r)):Te,mr(1),n?Kt(e):fs(()=>new St))}function sl(t,e){return U(tg(t,e,arguments.length>=2,!0))}function al(...t){let e=zt(t);return U((n,r)=>{(e?pr(t,n,e):pr(t,n)).subscribe(r)})}function Ve(t,e){return U((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;ae(t(c,u)).subscribe(i=j(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cl(t){return U((e,n)=>{ae(t).subscribe(j(n,()=>n.complete(),si)),!n.closed&&e.subscribe(n)})}function J(t,e,n){let r=D(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Te}var w=class extends Error{constructor(e,n){super(js(e,n)),this.code=e}};function js(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var El=class extends Se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=ll(o),i&&(i=ll(i)),s&&(s=ll(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ee&&e.add(a),a}};function ll(t){return e=>{setTimeout(t,void 0,e)}}var et=El;var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(R||{});function Ae(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ae).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ng(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Fg=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Fg||{}),pt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pt||{});function bi(t){return{toString:t}.toString()}var ci=globalThis;var fi={},tt=[];function G(t){for(let e in t)if(t[e]===G)return e;throw Error("Could not find renamed property on target object.")}var uC=G({\u0275cmp:G}),dC=G({\u0275dir:G}),fC=G({\u0275pipe:G}),hC=G({\u0275mod:G}),Es=G({\u0275fac:G}),li=G({__NG_ELEMENT_ID__:G}),rg=G({__NG_ENV_ID__:G}),Jt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Jt||{});function Ug(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Cl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];gC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function pC(t){return t===3||t===4||t===6}function gC(t){return t.charCodeAt(0)===64}function eu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ig(t,n,i,null,e[++r]):ig(t,n,i,null,null))}}return t}function ig(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var jg="ng-template";function mC(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Ug(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Vg(t){return t.type===4&&t.value!==jg}function vC(t,e,n){let r=t.type===4&&!n?jg:t.value;return e===r}function yC(t,e,n){let r=4,i=t.attrs||[],o=IC(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Xe(r)&&!Xe(c))return!1;if(s&&Xe(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!vC(t,c,n)||c===""&&e.length===1){if(Xe(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!mC(t.attrs,l,n)){if(Xe(r))return!1;s=!0}continue}let u=r&8?"class":c,d=_C(u,i,Vg(t),n);if(d===-1){if(Xe(r))return!1;s=!0;continue}if(l!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Ug(h,l,0)!==-1||r&2&&l!==f){if(Xe(r))return!1;s=!0}}}}return Xe(r)||s}function Xe(t){return(t&1)===0}function _C(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return EC(e,t)}function wC(t,e,n=!1){for(let r=0;r<e.length;r++)if(yC(t,e[r],n))return!0;return!1}function IC(t){for(let e=0;e<t.length;e++){let n=t[e];if(pC(n))return e}return t.length}function EC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function og(t,e){return t?":not("+e.trim()+")":e}function CC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Xe(s)&&(e+=og(o,i),i=""),r=s,o=o||!Xe(r);n++}return i!==""&&(e+=og(o,i)),e}function DC(t){return t.map(CC).join(",")}function bC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Xe(i))break;i=o}r++}return{attrs:e,classes:n}}function gt(t){return bi(()=>{let e=zg(t),n=Z(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Fg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pt.Emulated,styles:t.styles||tt,_:null,schemas:t.schemas||null,tView:null,id:""});qg(n);let r=t.dependencies;return n.directiveDefs=ag(r,!1),n.pipeDefs=ag(r,!0),n.id=AC(n),n})}function TC(t){return Sn(t)||$g(t)}function SC(t){return t!==null}function mt(t){return bi(()=>({type:t.type,bootstrap:t.bootstrap||tt,declarations:t.declarations||tt,imports:t.imports||tt,exports:t.exports||tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sg(t,e){if(t==null)return fi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Jt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Jt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function tu(t){return bi(()=>{let e=zg(t);return qg(e),e})}function Sn(t){return t[uC]||null}function $g(t){return t[dC]||null}function Bg(t){return t[fC]||null}function Hg(t){let e=Sn(t)||$g(t)||Bg(t);return e!==null?e.standalone:!1}function Wg(t,e){let n=t[hC]||null;if(!n&&e===!0)throw new Error(`Type ${Ae(t)} does not have '\u0275mod' property.`);return n}function zg(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sg(t.inputs,e),outputs:sg(t.outputs),debugInfo:null}}function qg(t){t.features?.forEach(e=>e(t))}function ag(t,e){if(!t)return null;let n=e?Bg:TC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(SC)}function AC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Ne=0,L=1,b=2,ue=3,nt=4,it=5,Mt=6,hi=7,Nt=8,Ir=9,Xt=10,de=11,pi=12,cg=13,Ti=14,He=15,nu=16,vr=17,Vs=18,$s=19,Gg=20,ui=21,ul=22,An=23,We=25,Yg=1,gi=6,Rt=7,Cs=8,Ds=9,Me=10,ru=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ru||{});function Zt(t){return Array.isArray(t)&&typeof t[Yg]=="object"}function vt(t){return Array.isArray(t)&&t[Yg]===!0}function Kg(t){return(t.flags&4)!==0}function Bs(t){return t.componentOffset>-1}function Qg(t){return(t.flags&1)===1}function Si(t){return!!t.template}function Zg(t){return(t[b]&512)!==0}var Jg="svg",MC="math",NC=!1;function RC(){return NC}function rt(t){for(;Array.isArray(t);)t=t[Ne];return t}function xC(t,e){return rt(e[t])}function ot(t,e){return rt(e[t.index])}function PC(t,e){return t.data[e]}function br(t,e){let n=e[t];return Zt(n)?n:n[Ne]}function iu(t){return(t[b]&128)===128}function OC(t){return vt(t[ue])}function lg(t,e){return e==null?null:t[e]}function Xg(t){t[vr]=0}function kC(t){t[b]&1024||(t[b]|=1024,iu(t)&&mi(t))}function ou(t){return!!(t[b]&9216||t[An]?.dirty)}function Dl(t){ou(t)?mi(t):t[b]&64&&(RC()?(t[b]|=1024,mi(t)):t[Xt].changeDetectionScheduler?.notify())}function mi(t){t[Xt].changeDetectionScheduler?.notify();let e=vi(t);for(;e!==null&&!(e[b]&8192||(e[b]|=8192,!iu(e)));)e=vi(e)}function LC(t,e){if((t[b]&256)===256)throw new w(911,!1);t[ui]===null&&(t[ui]=[]),t[ui].push(e)}function vi(t){let e=t[ue];return vt(e)?e[ue]:e}var $={lFrame:sm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function FC(){return $.lFrame.elementDepthCount}function UC(){$.lFrame.elementDepthCount++}function jC(){$.lFrame.elementDepthCount--}function em(){return $.bindingsEnabled}function Ai(){return $.skipHydrationRootTNode!==null}function VC(t){return $.skipHydrationRootTNode===t}function $C(t){$.skipHydrationRootTNode=t}function BC(){$.skipHydrationRootTNode=null}function Re(){return $.lFrame.lView}function Mi(){return $.lFrame.tView}function Pt(){let t=tm();for(;t!==null&&t.type===64;)t=t.parent;return t}function tm(){return $.lFrame.currentTNode}function HC(){let t=$.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Hs(t,e){let n=$.lFrame;n.currentTNode=t,n.isParent=e}function nm(){return $.lFrame.isParent}function WC(){$.lFrame.isParent=!1}function zC(t){return $.lFrame.bindingIndex=t}function qC(){return $.lFrame.bindingIndex++}function GC(){return $.lFrame.inI18n}function YC(t,e){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=t,bl(e)}function KC(){return $.lFrame.currentDirectiveIndex}function bl(t){$.lFrame.currentDirectiveIndex=t}function rm(t){$.lFrame.currentQueryIndex=t}function QC(t){let e=t[L];return e.type===2?e.declTNode:e.type===1?t[it]:null}function im(t,e,n){if(n&R.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&R.Host);)if(i=QC(o),i===null||(o=o[Ti],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=$.lFrame=om();return r.currentTNode=e,r.lView=t,!0}function su(t){let e=om(),n=t[L];$.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function om(){let t=$.lFrame,e=t===null?null:t.child;return e===null?sm(t):e}function sm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function am(){let t=$.lFrame;return $.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var cm=am;function au(){let t=am();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cu(){return $.lFrame.selectedIndex}function Mn(t){$.lFrame.selectedIndex=t}function Ni(){$.lFrame.currentNamespace=Jg}function Ws(){ZC()}function ZC(){$.lFrame.currentNamespace=null}function lm(){return $.lFrame.currentNamespace}var um=!0;function dm(){return um}function nn(t){um=t}function JC(){return lu(Pt(),Re())}function lu(t,e){return new zs(ot(t,e))}var zs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=JC;let t=e;return t})();function uu(t,e){t.forEach(n=>Array.isArray(n)?uu(n,e):e(n))}function fm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var XC="ngSkipHydration",eD="ngskiphydration";function hm(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===eD)return!0}return!1}function pm(t){return t.hasAttribute(XC)}function Ts(t){return(t.flags&128)===128}function tD(t){if(Ts(t))return!0;let e=t.parent;for(;e;){if(Ts(t)||hm(e))return!0;e=e.parent}return!1}var Tl;function gm(t){Tl=t}function qs(){if(Tl!==void 0)return Tl;if(typeof document<"u")return document;throw new w(210,!1)}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function yt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gs(t){return ug(t,vm)||ug(t,ym)}function mm(t){return Gs(t)!==null}function ug(t,e){return t.hasOwnProperty(e)?t[e]:null}function nD(t){let e=t&&(t[vm]||t[ym]);return e||null}function dg(t){return t&&(t.hasOwnProperty(fg)||t.hasOwnProperty(rD))?t[fg]:null}var vm=G({\u0275prov:G}),fg=G({\u0275inj:G}),ym=G({ngInjectableDef:G}),rD=G({ngInjectorDef:G}),E=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},Ys=new E("",{providedIn:"root",factory:()=>iD}),iD="ng",du=new E(""),st=new E("",{providedIn:"platform",factory:()=>"unknown"});var fu=new E("",{providedIn:"root",factory:()=>qs().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oD=G({__forward_ref__:G});function _m(t){return t.__forward_ref__=_m,t.toString=function(){return Ae(this())},t}function Be(t){return wm(t)?t():t}function wm(t){return typeof t=="function"&&t.hasOwnProperty(oD)&&t.__forward_ref__===_m}function Im(t){return t&&!!t.\u0275providers}function Em(t){return typeof t=="string"?t:t==null?"":String(t)}function sD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Em(t)}function aD(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new w(-200,t)}function hu(t,e){throw new w(-201,!1)}var Sl;function cD(){return Sl}function $e(t){let e=Sl;return Sl=t,e}function Cm(t,e,n){let r=Gs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&R.Optional)return null;if(e!==void 0)return e;hu(t,"Injector")}var lD={},yi=lD,Al="__NG_DI_FLAG__",Ss="ngTempTokenPath",uD="ngTokenPath",dD=/\n/gm,fD="\u0275",hg="__source",di;function Qt(t){let e=di;return di=t,e}function hD(t,e=R.Default){if(di===void 0)throw new w(-203,!1);return di===null?Cm(t,void 0,e):di.get(t,e&R.Optional?null:void 0,e)}function x(t,e=R.Default){return(cD()||hD)(Be(t),e)}function v(t,e=R.Default){return x(t,Ks(e))}function Ks(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ml(t){let e=[];for(let n=0;n<t.length;n++){let r=Be(t[n]);if(Array.isArray(r)){if(r.length===0)throw new w(900,!1);let i,o=R.Default;for(let s=0;s<r.length;s++){let a=r[s],c=gD(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function pD(t,e){return t[Al]=e,t.prototype[Al]=e,t}function gD(t){return t[Al]}function mD(t,e,n,r){let i=t[Ss];throw e[hg]&&i.unshift(e[hg]),t.message=vD(`
`+t.message,i,n,r),t[uD]=i,t[Ss]=null,t}function vD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==fD?t.slice(2):t;let i=Ae(e);if(Array.isArray(e))i=e.map(Ae).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ae(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dD,`
  `)}`}function yD(){let t=new Rn;return v(st)==="browser"&&(t.store=_D(qs(),v(Ys))),t}var Rn=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=C({token:e,providedIn:"root",factory:yD});let t=e;return t})();function _D(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Dm="h",bm="b",Nl=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Nl||{}),wD="e",ID="t",pu="c",Tm="x",As="r",ED="i",CD="n",DD="d",bD="__nghData__",Sm=bD,dl="ngh",TD="nghm",Am=()=>null;function SD(t,e,n=!1){let r=t.getAttribute(dl);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=e.get(Rn,null,{optional:!0});u!==null&&(c=u.get(Sm,[])[Number(r)])}let l={data:c,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Qs(l,0,t.nextSibling)),a?t.setAttribute(dl,a):t.removeAttribute(dl),l}function AD(){Am=SD}function gu(t,e,n=!1){return Am(t,e,n)}function MD(t){let e=t._lView;return e[L].type===2?null:(Zg(e)&&(e=e[We]),e)}function ND(t){return t.textContent?.replace(/\s/gm,"")}function RD(t){let e=qs(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=ND(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Qs(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Rl(t,e){return t.segmentHeads?.[e]??null}function xD(t,e){let n=t.data,r=n[wD]?.[e]??null;return r===null&&n[pu]?.[e]&&(r=mu(t,e)),r}function Mm(t,e){return t.data[pu]?.[e]??null}function mu(t,e){let n=Mm(t,e)??[],r=0;for(let i of n)r+=i[As]*(i[Tm]??1);return r}function Zs(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[DD];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var hs="__parameters__";function PD(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function OD(t,e,n){return bi(()=>{let r=PD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(hs)?c[hs]:Object.defineProperty(c,hs,{value:[]})[hs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var we=pD(OD("Optional"),8);function Er(t,e){let n=t.hasOwnProperty(Es);return n?t[Es]:null}var Nn=new E(""),Nm=new E("",-1),Rm=new E(""),Ms=class{get(e,n=yi){if(n===yi){let r=new Error(`NullInjectorError: No provider for ${Ae(e)}!`);throw r.name="NullInjectorError",r}return n}};function xn(t){return{\u0275providers:t}}function Ri(...t){return{\u0275providers:xm(!0,t),\u0275fromNgModule:!0}}function xm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return uu(e,s=>{let a=s;xl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Pm(i,o),n}function Pm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];vu(i,o=>{e(o,r)})}}function xl(t,e,n,r){if(t=Be(t),!t)return!1;let i=null,o=dg(t),s=!o&&Sn(t);if(!o&&!s){let c=t.ngModule;if(o=dg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)xl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{uu(o.imports,u=>{xl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Pm(l,e)}if(!a){let l=Er(i)||(()=>new i);e({provide:i,useFactory:l,deps:tt},i),e({provide:Rm,useValue:i,multi:!0},i),e({provide:Nn,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;vu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function vu(t,e){for(let n of t)Im(n)&&(n=n.\u0275providers),Array.isArray(n)?vu(n,e):e(n)}var kD=G({provide:String,useValue:G});function Om(t){return t!==null&&typeof t=="object"&&kD in t}function LD(t){return!!(t&&t.useExisting)}function FD(t){return!!(t&&t.useFactory)}function Pl(t){return typeof t=="function"}var Js=new E(""),vs={},UD={},fl;function yu(){return fl===void 0&&(fl=new Ms),fl}var ze=class{},_i=class extends ze{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kl(e,s=>this.processProvider(s)),this.records.set(Nm,yr(void 0,this)),i.has("environment")&&this.records.set(ze,yr(void 0,this));let o=this.records.get(Js);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Rm,tt,R.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Qt(this),r=$e(void 0),i;try{return e()}finally{Qt(n),$e(r)}}get(e,n=yi,r=R.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(rg))return e[rg](this);r=Ks(r);let i,o=Qt(this),s=$e(void 0);try{if(!(r&R.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=WD(e)&&Gs(e);l&&this.injectableDefInScope(l)?c=yr(Ol(e),vs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&R.Self?yu():this.parent;return n=r&R.Optional&&n===yi?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ss]=a[Ss]||[]).unshift(Ae(e)),o)throw a;return mD(a,e,"R3InjectorError",this.source)}else throw a}finally{$e(s),Qt(o)}}resolveInjectorInitializers(){let e=Qt(this),n=$e(void 0),r;try{let i=this.get(Nn,tt,R.Self);for(let o of i)o()}finally{Qt(e),$e(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ae(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(e){e=Be(e);let n=Pl(e)?e:Be(e&&e.provide),r=VD(e);if(!Pl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=yr(void 0,vs,!0),i.factory=()=>Ml(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===vs&&(n.value=UD,n.value=n.factory()),typeof n.value=="object"&&n.value&&HD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Be(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ol(t){let e=Gs(t),n=e!==null?e.factory:Er(t);if(n!==null)return n;if(t instanceof E)throw new w(204,!1);if(t instanceof Function)return jD(t);throw new w(204,!1)}function jD(t){if(t.length>0)throw new w(204,!1);let n=nD(t);return n!==null?()=>n.factory(t):()=>new t}function VD(t){if(Om(t))return yr(void 0,t.useValue);{let e=$D(t);return yr(e,vs)}}function $D(t,e,n){let r;if(Pl(t)){let i=Be(t);return Er(i)||Ol(i)}else if(Om(t))r=()=>Be(t.useValue);else if(FD(t))r=()=>t.useFactory(...Ml(t.deps||[]));else if(LD(t))r=()=>x(Be(t.useExisting));else{let i=Be(t&&(t.useClass||t.provide));if(BD(t))r=()=>new i(...Ml(t.deps));else return Er(i)||Ol(i)}return r}function yr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BD(t){return!!t.deps}function HD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function WD(t){return typeof t=="function"||typeof t=="object"&&t instanceof E}function kl(t,e){for(let n of t)Array.isArray(n)?kl(n,e):n&&Im(n)?kl(n.\u0275providers,e):e(n)}function rn(t,e){t instanceof _i&&t.assertNotDestroyed();let n,r=Qt(t),i=$e(void 0);try{return e()}finally{Qt(r),$e(i)}}function zD(t){return typeof t=="function"}var Ll=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function km(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xs(){return Lm}function Lm(t){return t.type.prototype.ngOnChanges&&(t.setInput=GD),qD}Xs.ngInherit=!0;function qD(){let t=Um(this),e=t?.current;if(e){let n=t.previous;if(n===fi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function GD(t,e,n,r,i){let o=this.declaredInputs[r],s=Um(t)||YD(t,{previous:fi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ll(l&&l.currentValue,n,c===fi),km(t,e,i,n)}var Fm="__ngSimpleChanges__";function Um(t){return t[Fm]||null}function YD(t,e){return t[Fm]=e}var pg=null;var ft=function(t,e,n){pg?.(t,e,n)};function KD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Lm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function jm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function ys(t,e,n){Vm(t,e,3,n)}function _s(t,e,n,r){(t[b]&3)===n&&Vm(t,e,n,r)}function hl(t,e){let n=t[b];(n&3)===e&&(n&=16383,n+=1,t[b]=n)}function Vm(t,e,n,r){let i=r!==void 0?t[vr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[vr]+=65536),(a<o||o==-1)&&(QD(t,n,e,c),t[vr]=(t[vr]&4294901760)+c+2),c++}function gg(t,e){ft(4,t,e);let n=be(null);try{e.call(t)}finally{be(n),ft(5,t,e)}}function QD(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[b]>>14<t[vr]>>16&&(t[b]&3)===e&&(t[b]+=16384,gg(a,o)):gg(a,o)}var wr=-1,wi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ZD(t){return t instanceof wi}function JD(t){return(t.flags&8)!==0}function XD(t){return(t.flags&16)!==0}function $m(t){return t!==wr}function Ns(t){return t&32767}function eb(t){return t>>16}function Rs(t,e){let n=eb(t),r=e;for(;n>0;)r=r[Ti],n--;return r}var Fl=!0;function mg(t){let e=Fl;return Fl=t,e}var tb=256,Bm=tb-1,Hm=5,nb=0,ht={};function rb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(li)&&(r=n[li]),r==null&&(r=n[li]=nb++);let i=r&Bm,o=1<<i;e.data[t+(i>>Hm)]|=o}function Wm(t,e){let n=zm(t,e);if(n!==-1)return n;let r=e[L];r.firstCreatePass&&(t.injectorIndex=e.length,pl(r.data,t),pl(e,null),pl(r.blueprint,null));let i=_u(t,e),o=t.injectorIndex;if($m(i)){let s=Ns(i),a=Rs(i,e),c=a[L].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function pl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _u(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Qm(i),r===null)return wr;if(n++,i=i[Ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return wr}function ib(t,e,n){rb(t,e,n)}function qm(t,e,n){if(n&R.Optional||t!==void 0)return t;hu(e,"NodeInjector")}function Gm(t,e,n,r){if(n&R.Optional&&r===void 0&&(r=null),!(n&(R.Self|R.Host))){let i=t[Ir],o=$e(void 0);try{return i?i.get(e,r,n&R.Optional):Cm(e,r,n&R.Optional)}finally{$e(o)}}return qm(r,e,n)}function Ym(t,e,n,r=R.Default,i){if(t!==null){if(e[b]&2048&&!(r&R.Self)){let s=lb(t,e,n,r,ht);if(s!==ht)return s}let o=Km(t,e,n,r,ht);if(o!==ht)return o}return Gm(e,n,r,i)}function Km(t,e,n,r,i){let o=ab(n);if(typeof o=="function"){if(!im(e,t,r))return r&R.Host?qm(i,n,r):Gm(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&R.Optional))hu(n);else return s}finally{cm()}}else if(typeof o=="number"){let s=null,a=zm(t,e),c=wr,l=r&R.Host?e[He][it]:null;for((a===-1||r&R.SkipSelf)&&(c=a===-1?_u(t,e):e[a+8],c===wr||!yg(r,!1)?a=-1:(s=e[L],a=Ns(c),e=Rs(c,e)));a!==-1;){let u=e[L];if(vg(o,a,u.data)){let d=ob(a,e,n,s,r,l);if(d!==ht)return d}c=e[a+8],c!==wr&&yg(r,e[L].data[a+8]===l)&&vg(o,a,e)?(s=u,a=Ns(c),e=Rs(c,e)):a=-1}}return i}function ob(t,e,n,r,i,o){let s=e[L],a=s.data[t+8],c=r==null?Bs(a)&&Fl:r!=s&&(a.type&3)!==0,l=i&R.Host&&o===a,u=sb(a,s,n,c,l);return u!==null?Ii(e,s,u,a):ht}function sb(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&Si(h)&&h.type===n)return c}return null}function Ii(t,e,n,r){let i=t[n],o=e.data;if(ZD(i)){let s=i;s.resolving&&aD(sD(o[n]));let a=mg(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?$e(s.injectImpl):null,u=im(t,r,R.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&KD(n,o[n],e)}finally{l!==null&&$e(l),mg(a),s.resolving=!1,cm()}}return i}function ab(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(li)?t[li]:void 0;return typeof e=="number"?e>=0?e&Bm:cb:e}function vg(t,e,n){let r=1<<t;return!!(n[e+(t>>Hm)]&r)}function yg(t,e){return!(t&R.Self)&&!(t&R.Host&&e)}var Tn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ym(this._tNode,this._lView,e,Ks(r),n)}};function cb(){return new Tn(Pt(),Re())}function wu(t){return bi(()=>{let e=t.prototype.constructor,n=e[Es]||Ul(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Es]||Ul(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ul(t){return wm(t)?()=>{let e=Ul(Be(t));return e&&e()}:Er(t)}function lb(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[b]&2048&&!(s[b]&512);){let a=Km(o,s,n,r|R.Self,ht);if(a!==ht)return a;let c=o.parent;if(!c){let l=s[Gg];if(l){let u=l.get(n,ht,r);if(u!==ht)return u}c=Qm(s),s=s[Ti]}o=c}return i}function Qm(t){let e=t[L],n=e.type;return n===2?e.declTNode:n===1?t[it]:null}function _g(t,e=null,n=null,r){let i=Zm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Zm(t,e=null,n=null,r,i=new Set){let o=[n||tt,Ri(t)];return r=r||(typeof t=="object"?void 0:Ae(t)),new _i(o,e||yu(),r||null,i)}var xe=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return _g({name:""},i,r,"");{let o=r.name??"";return _g({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=yi,e.NULL=new Ms,e.\u0275prov=C({token:e,providedIn:"any",factory:()=>x(Nm)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),ub="ngOriginalError";function gl(t){return t[ub]}var xt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&gl(e);for(;n&&gl(n);)n=gl(n);return n||null}},Jm=new E("",{providedIn:"root",factory:()=>v(xt).handleError.bind(void 0)}),ps=new E(""),Xm=!1,ev=new E("",{providedIn:"root",factory:()=>Xm});var db=/^>|^->|<!--|-->|--!>|<!-$/g,fb=/(<|>)/g,hb="\u200B$1\u200B";function pb(t){return t.replace(db,e=>e.replace(fb,hb))}var tv=new Map,gb=0;function mb(){return gb++}function vb(t){tv.set(t[$s],t)}function yb(t){tv.delete(t[$s])}var wg="__ngContext__";function Cr(t,e){Zt(e)?(t[wg]=e[$s],vb(e)):t[wg]=e}function _b(t){return t.ownerDocument.body}function nv(t){return t instanceof Function?t():t}function gs(t){return(t??v(xe)).get(st)==="browser"}var Pn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Pn||{}),wb;function Iu(t,e){return wb(t,e)}function _r(t,e,n,r,i){if(r!=null){let o,s=!1;vt(r)?o=r:Zt(r)&&(s=!0,r=r[Ne]);let a=rt(r);t===0&&n!==null?i==null?cv(e,n,a):xs(e,n,a,i||null,!0):t===1&&n!==null?xs(e,n,a,i||null,!0):t===2?dv(e,a,s):t===3&&e.destroyNode(a),o!=null&&Fb(e,t,o,n,i)}}function rv(t,e){return t.createText(e)}function Ib(t,e,n){t.setValue(e,n)}function iv(t,e){return t.createComment(pb(e))}function Eu(t,e,n){return t.createElement(e,n)}function Eb(t,e){ov(t,e),e[Ne]=null,e[it]=null}function Cb(t,e,n,r,i,o){r[Ne]=i,r[it]=e,ea(t,r,n,1,i,o)}function ov(t,e){ea(t,e,e[de],2,null,null)}function Db(t){let e=t[pi];if(!e)return ml(t[L],t);for(;e;){let n=null;if(Zt(e))n=e[pi];else{let r=e[Me];r&&(n=r)}if(!n){for(;e&&!e[nt]&&e!==t;)Zt(e)&&ml(e[L],e),e=e[ue];e===null&&(e=t),Zt(e)&&ml(e[L],e),n=e&&e[nt]}e=n}}function bb(t,e,n,r){let i=Me+r,o=n.length;r>0&&(n[i-1][nt]=e),r<o-Me?(e[nt]=n[i],fm(n,Me+r,e)):(n.push(e),e[nt]=null),e[ue]=n;let s=e[nu];s!==null&&n!==s&&Tb(s,e);let a=e[Vs];a!==null&&a.insertView(t),Dl(e),e[b]|=128}function Tb(t,e){let n=t[Ds],i=e[ue][ue][He];e[He]!==i&&(t[b]|=ru.HasTransplantedViews),n===null?t[Ds]=[e]:n.push(e)}function sv(t,e){let n=t[Ds],r=n.indexOf(e);n.splice(r,1)}function jl(t,e){if(t.length<=Me)return;let n=Me+e,r=t[n];if(r){let i=r[nu];i!==null&&i!==t&&sv(i,r),e>0&&(t[n-1][nt]=r[nt]);let o=bs(t,Me+e);Eb(r[L],r);let s=o[Vs];s!==null&&s.detachView(o[L]),r[ue]=null,r[nt]=null,r[b]&=-129}return r}function av(t,e){if(!(e[b]&256)){let n=e[de];n.destroyNode&&ea(t,e,n,3,null,null),Db(e)}}function ml(t,e){if(!(e[b]&256)){e[b]&=-129,e[b]|=256,e[An]&&Tp(e[An]),Ab(t,e),Sb(t,e),e[L].type===1&&e[de].destroy();let n=e[nu];if(n!==null&&vt(e[ue])){n!==e[ue]&&sv(n,e);let r=e[Vs];r!==null&&r.detachView(t)}yb(e)}}function Sb(t,e){let n=t.cleanup,r=e[hi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[hi]=null);let i=e[ui];if(i!==null){e[ui]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Ab(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ft(4,a,c);try{c.call(a)}finally{ft(5,a,c)}}else{ft(4,i,o);try{o.call(i)}finally{ft(5,i,o)}}}}}function Mb(t,e,n){return Nb(t,e.parent,n)}function Nb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ne];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===pt.None||o===pt.Emulated)return null}return ot(r,n)}}function xs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function cv(t,e,n){t.appendChild(e,n)}function Ig(t,e,n,r,i){r!==null?xs(t,e,n,r,i):cv(t,e,n)}function Rb(t,e,n,r){t.removeChild(e,n,r)}function Cu(t,e){return t.parentNode(e)}function xb(t,e){return t.nextSibling(e)}function Pb(t,e,n){return kb(t,e,n)}function Ob(t,e,n){return t.type&40?ot(t,n):null}var kb=Ob,Eg;function lv(t,e,n,r){let i=Mb(t,r,e),o=e[de],s=r.parent||e[it],a=Pb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Ig(o,i,n[c],a,!1);else Ig(o,i,n,a,!1);Eg!==void 0&&Eg(o,r,e,n,i)}function ws(t,e){if(e!==null){let n=e.type;if(n&3)return ot(e,t);if(n&4)return Vl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ws(t,r);{let i=t[e.index];return vt(i)?Vl(-1,i):rt(i)}}else{if(n&32)return Iu(e,t)()||rt(t[e.index]);{let r=uv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vi(t[He]);return ws(i,r)}else return ws(t,e.next)}}}return null}function uv(t,e){if(e!==null){let r=t[He][it],i=e.projection;return r.projection[i]}return null}function Vl(t,e){let n=Me+t+1;if(n<e.length){let r=e[n],i=r[L].firstChild;if(i!==null)return ws(r,i)}return e[Rt]}function dv(t,e,n){let r=Cu(t,e);r&&Rb(t,r,e,n)}function fv(t){t.textContent=""}function Du(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Cr(rt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Du(t,e,n.child,r,i,o,!1),_r(e,t,i,a,o);else if(c&32){let l=Iu(n,r),u;for(;u=l();)_r(e,t,i,u,o);_r(e,t,i,a,o)}else c&16?Lb(t,e,r,n,i,o):_r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ea(t,e,n,r,i,o){Du(n,r,t.firstChild,e,i,o,!1)}function Lb(t,e,n,r,i,o){let s=n[He],c=s[it].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];_r(e,t,i,u,o)}else{let l=c,u=s[ue];Ts(r)&&(l.flags|=128),Du(t,e,l,u,i,o,!0)}}function Fb(t,e,n,r,i){let o=n[Rt],s=rt(n);o!==s&&_r(e,t,r,o,i);for(let a=Me;a<n.length;a++){let c=n[a];ea(c[L],c,t,e,r,o)}}function Ub(t,e,n){t.setAttribute(e,"style",n)}function hv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Cl(t,e,r),i!==null&&hv(t,e,i),o!==null&&Ub(t,e,o)}var ta={};function gv(t=1){mv(Mi(),Re(),cu()+t,!1)}function mv(t,e,n,r){if(!r)if((e[b]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ys(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_s(e,o,0,n)}Mn(n)}function xi(t,e=R.Default){let n=Re();if(n===null)return x(t,e);let r=Pt();return Ym(r,n,Be(t),e)}function vv(t,e,n,r,i,o){let s=be(null);try{let a=null;i&Jt.SignalBased&&(a=e[r][Ep]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Jt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):km(e,a,r,o)}finally{be(s)}}function jb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Mn(~i);else{let o=i,s=n[++r],a=n[++r];YC(s,o);let c=e[o];a(2,c)}}}finally{Mn(-1)}}function bu(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ne]=i,d[b]=r|4|128|8|64,(l!==null||t&&t[b]&2048)&&(d[b]|=2048),Xg(d),d[ue]=d[Ti]=t,d[Nt]=n,d[Xt]=s||t&&t[Xt],d[de]=a||t&&t[de],d[Ir]=c||t&&t[Ir]||null,d[it]=o,d[$s]=mb(),d[Mt]=u,d[Gg]=l,d[He]=e.type==2?t[He]:d,d}function Tu(t,e,n,r,i){let o=t.data[e];if(o===null)o=Vb(t,e,n,r,i),GC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=HC();o.injectorIndex=s===null?-1:s.injectorIndex}return Hs(o,!0),o}function Vb(t,e,n,r,i){let o=tm(),s=nm(),a=s?o:o&&o.parent,c=t.data[e]=Yb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function yv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _v(t,e,n,r,i){let o=cu(),s=r&2;try{Mn(-1),s&&e.length>We&&mv(t,e,We,!1),ft(s?2:0,i),n(r,i)}finally{Mn(o),ft(s?3:1,i)}}function wv(t,e,n){if(Kg(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{be(r)}}}function $b(t,e,n){em()&&(Xb(t,e,n,ot(n,e)),(n.flags&64)===64&&bv(t,e,n))}function Bb(t,e,n=ot){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Iv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ev(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ev(t,e,n,r,i,o,s,a,c,l,u){let d=We+r,f=d+i,h=Hb(d,f),g=typeof l=="function"?l():l;return h[L]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function Hb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ta);return n}function Wb(t,e,n,r){let o=r.get(ev,Xm)||n===pt.ShadowDom,s=t.selectRootElement(e,o);return zb(s),s}function zb(t){Cv(t)}var Cv=()=>null;function qb(t){pm(t)?fv(t):RD(t)}function Gb(){Cv=qb}function Yb(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ai()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Cg(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Jt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Dg(r,n,l,a,c):Dg(r,n,l,a)}return r}function Dg(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function Kb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,g=f?f.outputs:null;c=Cg(0,d.inputs,u,c,h),l=Cg(1,d.outputs,u,l,g);let y=c!==null&&s!==null&&!Vg(e)?cT(c,u,s):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Qb(t,e,n,r){if(em()){let i=r===null?null:{"":-1},o=tT(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Dv(t,e,n,s,i,a),i&&nT(n,r,i)}n.mergedAttrs=eu(n.mergedAttrs,n.attrs)}function Dv(t,e,n,r,i,o){for(let l=0;l<r.length;l++)ib(Wm(n,e),t,r[l].type);iT(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=yv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=eu(n.mergedAttrs,u.hostAttrs),oT(t,n,e,c,u),rT(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Kb(t,n,o)}function Zb(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Jb(s)!=a&&s.push(a),s.push(n,r,o)}}function Jb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Xb(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Bs(n)&&sT(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Wm(n,e),Cr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Ii(e,t,a,n);if(Cr(l,e),s!==null&&aT(e,a-i,l,c,n,s),Si(c)){let u=br(n.index,e);u[Nt]=Ii(e,t,a,n)}}}function bv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=KC();try{Mn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];bl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eT(c,l)}}finally{Mn(-1),bl(s)}}function eT(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function tT(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(wC(e,s.selectors,!1))if(r||(r=[]),Si(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;$l(t,e,c)}else r.unshift(s),$l(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function $l(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nT(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new w(-301,!1);r.push(e[i],o)}}}function rT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Si(e)&&(n[""]=t)}}function iT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oT(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Er(i.type,!0)),s=new wi(o,Si(i),xi);t.blueprint[r]=s,n[r]=s,Zb(t,e,r,yv(t,n,i.hostVars,ta),i)}function sT(t,e,n){let r=ot(e,t),i=Iv(n),o=t[Xt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Su(t,bu(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function aT(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];vv(r,n,c,l,u,d)}}function cT(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function lT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Tv(t,e){let n=t.contentQueries;if(n!==null){let r=be(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];rm(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function Su(t,e){return t[pi]?t[cg][nt]=e:t[pi]=e,t[cg]=e,e}function Bl(t,e,n){rm(0);let r=be(null);try{e(t,n)}finally{be(r)}}function uT(t){return t[hi]||(t[hi]=[])}function dT(t){return t.cleanup||(t.cleanup=[])}function Sv(t,e){let n=t[Ir],r=n?n.get(xt,null):null;r&&r.handleError(e)}function Av(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];vv(u,l,r,a,c,i)}}function fT(t,e,n){let r=xC(e,t);Ib(t[de],r,n)}function hT(t,e){let n=br(e,t),r=n[L];pT(r,n);let i=n[Ne];i!==null&&n[Mt]===null&&(n[Mt]=gu(i,n[Ir])),Mv(r,n,n[Nt])}function pT(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mv(t,e,n){su(e);try{let r=t.viewQuery;r!==null&&Bl(1,r,n);let i=t.template;i!==null&&_v(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Vs]?.finishViewCreation(t),t.staticContentQueries&&Tv(t,e),t.staticViewQueries&&Bl(2,t.viewQuery,n);let o=t.components;o!==null&&gT(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[b]&=-5,au()}}function gT(t,e){for(let n=0;n<e.length;n++)hT(t,e[n])}function bg(t,e){return!e||e.firstChild===null||Ts(t)}function mT(t,e,n,r=!0){let i=e[L];if(bb(i,e,t,n),r){let s=Vl(n,t),a=e[de],c=Cu(a,t[Rt]);c!==null&&Cb(i,t[it],a,e,c,s)}let o=e[Mt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ps(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(rt(o)),vt(o)&&vT(o,r);let s=n.type;if(s&8)Ps(t,e,n.child,r);else if(s&32){let a=Iu(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=uv(e,n);if(Array.isArray(a))r.push(...a);else{let c=vi(e[He]);Ps(c[L],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function vT(t,e){for(let n=Me;n<t.length;n++){let r=t[n],i=r[L].firstChild;i!==null&&Ps(r[L],r,i,e)}t[Rt]!==t[Ne]&&e.push(t[Rt])}var Nv=[];function yT(t){return t[An]??_T(t)}function _T(t){let e=Nv.pop()??Object.create(IT);return e.lView=t,e}function wT(t){t.lView[An]!==t&&(t.lView=null,Nv.push(t))}var IT=Z(_({},Cp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{mi(t.lView)},consumerOnSignalRead(){this.lView[An]=this}});function Rv(t){return Pv(t[pi])}function xv(t){return Pv(t[nt])}function Pv(t){for(;t!==null&&!vt(t);)t=t[nt];return t}var Ov=100;function kv(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,o=!1;o||i.begin?.();try{ET(t,n)}catch(s){throw e&&Sv(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function ET(t,e){Hl(t,e);let n=0;for(;ou(t);){if(n===Ov)throw new w(103,!1);n++,Hl(t,1)}}function CT(t,e,n,r){let i=e[b];if((i&256)===256)return;let o=!1;!o&&e[Xt].inlineEffectRunner?.flush(),su(e);let s=null,a=null;!o&&DT(t)&&(a=yT(e),s=Dp(a));try{Xg(e),zC(t.bindingStartIndex),n!==null&&_v(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&ys(e,d,null)}else{let d=t.preOrderHooks;d!==null&&_s(e,d,0,null),hl(e,0)}if(bT(e),Lv(e,0),t.contentQueries!==null&&Tv(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&ys(e,d)}else{let d=t.contentHooks;d!==null&&_s(e,d,1),hl(e,1)}jb(t,e);let l=t.components;l!==null&&Uv(e,l,0);let u=t.viewQuery;if(u!==null&&Bl(2,u,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&ys(e,d)}else{let d=t.viewHooks;d!==null&&_s(e,d,2),hl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ul]){for(let d of e[ul])d();e[ul]=null}o||(e[b]&=-73)}catch(c){throw mi(e),c}finally{a!==null&&(bp(a,s),wT(a)),au()}}function DT(t){return t.type!==2}function Lv(t,e){for(let n=Rv(t);n!==null;n=xv(n))for(let r=Me;r<n.length;r++){let i=n[r];Fv(i,e)}}function bT(t){for(let e=Rv(t);e!==null;e=xv(e)){if(!(e[b]&ru.HasTransplantedViews))continue;let n=e[Ds];for(let r=0;r<n.length;r++){let i=n[r],o=i[ue];kC(i)}}}function TT(t,e,n){let r=br(e,t);Fv(r,n)}function Fv(t,e){iu(t)&&Hl(t,e)}function Hl(t,e){let r=t[L],i=t[b],o=t[An],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vc(o)),o&&(o.dirty=!1),t[b]&=-9217,s)CT(r,t,r.template,t[Nt]);else if(i&8192){Lv(t,1);let a=r.components;a!==null&&Uv(t,a,1)}}function Uv(t,e,n){for(let r=0;r<e.length;r++)TT(t,e[r],n)}function Au(t){for(t[Xt].changeDetectionScheduler?.notify();t;){t[b]|=64;let e=vi(t);if(Zg(t)&&!e)return t;t=e}return null}var Dr=class{get rootNodes(){let e=this._lView,n=e[L];return Ps(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nt]}set context(e){this._lView[Nt]=e}get destroyed(){return(this._lView[b]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ue];if(vt(e)){let n=e[Cs],r=n?n.indexOf(this):-1;r>-1&&(jl(e,r),bs(n,r))}this._attachedToViewContainer=!1}av(this._lView[L],this._lView)}onDestroy(e){LC(this._lView,e)}markForCheck(){Au(this._cdRefInjectingView||this._lView)}detach(){this._lView[b]&=-129}reattach(){Dl(this._lView),this._lView[b]|=128}detectChanges(){this._lView[b]|=1024,kv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ov(this._lView[L],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=e,Dl(this._lView)}};function jv(t){let e=t[gi]??[],r=t[ue][de];for(let i of e)ST(i,r);t[gi]=tt}function ST(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[As];for(;n<i;){let o=r.nextSibling;dv(e,r,!1),r=o,n++}}}function Vv(t){jv(t);for(let e=Me;e<t.length;e++)Os(t[e])}function Os(t){let e=t[L];for(let n=We;n<e.bindingStartIndex;n++)if(vt(t[n])){let r=t[n];Vv(r)}else Zt(t[n])&&Os(t[n])}function AT(t){let e=t._views;for(let n of e){let r=MD(n);if(r!==null&&r[Ne]!==null)if(Zt(r))Os(r);else{let i=r[Ne];Os(i),Vv(r)}}}var MT=new RegExp(`^(\\d+)*(${bm}|${Dm})*(.*)`);function NT(t){let e=t.match(MT),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function RT(t){return!t.prev&&t.parent?.type===8}function vl(t){return t.index-We}function na(t,e,n,r){let i=null,o=vl(r),s=t.data[CD];if(s?.[o])i=PT(s[o],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(RT(r)){let l=vl(r.parent);i=Rl(t,l)}else{let l=ot(c,n);if(a)i=l.firstChild;else{let u=vl(c),d=Rl(t,u);if(c.type===2&&d){let h=mu(t,u)+1;i=ra(h,d)}else i=l.nextSibling}}}return i}function ra(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function xT(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case Nl.FirstChild:n=n.firstChild;break;case Nl.NextSibling:n=n.nextSibling;break}}return n}function PT(t,e){let[n,...r]=NT(t),i;if(n===Dm)i=e[He][Ne];else if(n===bm)i=_b(e[He][Ne]);else{let o=Number(n);i=rt(e[o+We])}return xT(i,r)}function OT(t,e){let n=[];for(let r of e)for(let i=0;i<(r[Tm]??1);i++){let o={data:r,firstChild:null};r[As]>0&&(o.firstChild=t,t=ra(r[As],t)),n.push(o)}return[t,n]}var $v=()=>null;function kT(t,e){let n=t[gi];return!e||n===null||n.length===0?null:n[0].data[ED]===e?n.shift():(jv(t),null)}function LT(){$v=kT}function Tg(t,e){return $v(t,e)}var Wl=class{},zl=class{},ks=class{};function FT(t){let e=Error(`No component factory found for ${Ae(t)}.`);return e[UT]=t,e}var UT="ngComponent";var ql=class{resolveComponentFactory(e){throw FT(e)}},ia=(()=>{let e=class e{};e.NULL=new ql;let t=e;return t})(),Ei=class{};var jT=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),yl={};var Sg=new Set;function Pi(t){Sg.has(t)||(Sg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Oi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VT;let t=e;return t})();function VT(t){return $T(Pt(),Re(),(t&16)===16)}function $T(t,e,n){if(Bs(t)&&!n){let r=br(t.index,e);return new Dr(r,r)}else if(t.type&47){let r=e[He];return new Dr(r,e)}return null}function Ag(...t){}function BT(){let t=typeof ci.requestAnimationFrame=="function",e=ci[t?"requestAnimationFrame":"setTimeout"],n=ci[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var H=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BT().nativeRequestAnimationFrame,zT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new w(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HT,Ag,Ag);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HT={};function Mu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WT(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ci,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Gl(t),t.isCheckStableRunning=!0,Mu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Gl(t))}function zT(t){let e=()=>{WT(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(qT(a))return n.invokeTask(i,o,s,a);try{return Mg(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Ng(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Mg(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ng(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Gl(t),Mu(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Gl(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Mg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ng(t){t._nesting--,Mu(t)}function qT(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Bv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Yl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ng(i,a);else if(o==2){let c=a,l=e[++s];r=ng(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ls=class extends ia{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Sn(e);return new Ci(n,this.ngModule)}};function Rg(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function GT(t){let e=t.toLowerCase();return e==="svg"?Jg:e==="math"?MC:null}var Kl=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ks(r);let i=this.injector.get(e,yl,r);return i!==yl||n===yl?i:this.parentInjector.get(e,n,r)}},Ci=class extends ks{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Rg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Rg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=DC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof ze?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Kl(e,o):e,a=s.get(Ei,null);if(a===null)throw new w(407,!1);let c=s.get(jT,null),l=s.get(Bv,null),u=s.get(Wl,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:u},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?Wb(f,r,this.componentDef.encapsulation,s):Eu(f,h,GT(h)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let M=null;g!==null&&(M=gu(g,s,!0));let N=Ev(0,null,null,1,0,null,null,null,null,null,null),Q=bu(null,N,null,y,null,null,d,f,s,null,M);su(Q);let ce,ge;try{let ve=this.componentDef,ye,Wt=null;ve.findHostDirectiveDefs?(ye=[],Wt=new Map,ve.findHostDirectiveDefs(ve,ye,Wt),ye.push(ve)):ye=[ve];let Uc=YT(Q,g),oi=KT(Uc,g,ve,ye,Q,d,f);ge=PC(N,We),g&&JT(f,ve,g,r),n!==void 0&&XT(ge,this.ngContentSelectors,n),ce=ZT(oi,ve,ye,Wt,Q,[eS]),Mv(N,Q,null)}finally{au()}return new Ql(this.componentType,ce,lu(ge,Q),Q,ge)}},Ql=class extends zl{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Dr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Av(o[L],o,i,e,n),this.previousInputValues.set(e,n);let s=br(this._tNode.index,o);Au(s)}}get injector(){return new Tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function YT(t,e){let n=t[L],r=We;return t[r]=e,Tu(n,r,2,"#host",null)}function KT(t,e,n,r,i,o,s){let a=i[L];QT(r,t,e,s);let c=null;e!==null&&(c=gu(e,i[Ir]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=bu(i,Iv(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&$l(a,t,r.length-1),Su(i,d),i[t.index]=d}function QT(t,e,n,r){for(let i of t)e.mergedAttrs=eu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Yl(e,e.mergedAttrs,!0),n!==null&&pv(r,n,e))}function ZT(t,e,n,r,i,o){let s=Pt(),a=i[L],c=ot(s,i);Dv(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Ii(i,a,d,s);Cr(f,i)}bv(a,i,s),c&&Cr(c,i);let l=Ii(i,a,s.directiveStart+s.componentOffset,s);if(t[Nt]=i[Nt]=l,o!==null)for(let u of o)u(l,e);return wv(a,s,i),l}function JT(t,e,n,r){if(r)Cl(t,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=bC(e.selectors[0]);i&&Cl(t,n,i),o&&o.length>0&&hv(t,n,o.join(" "))}}function XT(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function eS(){let t=Pt();jm(Re()[L],t)}var oa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tS;let t=e;return t})();function tS(){let t=Pt();return rS(t,Re())}var nS=oa,Hv=class extends nS{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return lu(this._hostTNode,this._hostLView)}get injector(){return new Tn(this._hostTNode,this._hostLView)}get parentInjector(){let e=_u(this._hostTNode,this._hostLView);if($m(e)){let n=Rs(e,this._hostLView),r=Ns(e),i=n[L].data[r+8];return new Tn(i,n)}else return new Tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=xg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Me}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Tg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,bg(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!zD(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new Ci(Sn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?l:this.parentInjector).get(ze,null);y&&(o=y)}let u=Sn(c.componentType??{}),d=Tg(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,bg(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(OC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ue],l=new Hv(c,c[it],c[ue]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return mT(s,i,o,r),e.attachToViewContainerRef(),fm(_l(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=xg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=jl(this._lContainer,n);r&&(bs(_l(this._lContainer),n),av(r[L],r))}detach(e){let n=this._adjustIndex(e,-1),r=jl(this._lContainer,n);return r&&bs(_l(this._lContainer),n)!=null?new Dr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function xg(t){return t[Cs]}function _l(t){return t[Cs]||(t[Cs]=[])}function rS(t,e){let n,r=e[t.index];return vt(r)?n=r:(n=lT(r,e,null,t),e[t.index]=n,Su(e,n)),Wv(n,e,t,r),new Hv(n,t,e)}function iS(t,e){let n=t[de],r=n.createComment(""),i=ot(e,t),o=Cu(n,i);return xs(n,o,r,xb(n,i),!1),r}var Wv=qv,zv=()=>!1;function qv(t,e,n,r){if(t[Rt])return;let i;n.type&8?i=rt(r):i=iS(e,n),t[Rt]=i}function oS(t,e,n){if(t[Rt]&&t[gi])return!0;let r=n[Mt],i=e.index-We;if(!r||tD(e)||Zs(r,i))return!1;let s=Rl(r,i),a=r.data[pu]?.[i],[c,l]=OT(s,a);return t[Rt]=c,t[gi]=l,!0}function sS(t,e,n,r){zv(t,n,e)||qv(t,e,n,r)}function aS(){Wv=sS,zv=oS}var en=class{},Di=class{};var Zl=class extends en{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ls(this);let i=Wg(e);this._bootstrapComponents=nv(i.bootstrap),this._r3Injector=Zm(e,n,[{provide:en,useValue:this},{provide:ia,useValue:this.componentFactoryResolver},...r],Ae(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jl=class extends Di{constructor(e){super(),this.moduleType=e}create(e){return new Zl(this.moduleType,e,[])}};var Fs=class extends en{constructor(e){super(),this.componentFactoryResolver=new Ls(this),this.instance=null;let n=new _i([...e.providers,{provide:en,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],e.parent||yu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nu(t,e,n=null){return new Fs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ki=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cS(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}var lS=Gv;function Gv(t,e,n,r){return nn(!0),e[de].createComment("")}function uS(t,e,n,r){let i=e[Mt],o=!i||Ai()||Zs(i,r);if(nn(o),o)return Gv(t,e,n,r);let s=i.data[ID]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=na(i,t,e,n);Qs(i,r,a);let c=mu(i,r);return ra(c,a)}function dS(){lS=uS}function fS(t,e,n,r){return cS(t,qC(),n)?e+Em(n)+r:ta}function Pg(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Av(t,n,o[s],s,r)}function hS(t,e,n,r,i,o){let s=e.consts,a=lg(s,i),c=Tu(e,t,2,r,a);return Qb(e,n,c,lg(s,o)),c.attrs!==null&&Yl(c,c.attrs,!1),c.mergedAttrs!==null&&Yl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function K(t,e,n,r){let i=Re(),o=Mi(),s=We+t,a=i[de],c=o.firstCreatePass?hS(s,o,i,e,n,r):o.data[s],l=Yv(o,i,c,a,e,t);i[s]=l;let u=Qg(c);return Hs(c,!0),pv(a,l,c),(c.flags&32)!==32&&dm()&&lv(o,i,l,c),FC()===0&&Cr(l,i),UC(),u&&($b(o,i,c),wv(o,c,i)),r!==null&&Bb(i,c),K}function ne(){let t=Pt();nm()?WC():(t=t.parent,Hs(t,!1));let e=t;VC(e)&&BC(),jC();let n=Mi();return n.firstCreatePass&&(jm(n,t),Kg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&JD(e)&&Pg(n,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&XD(e)&&Pg(n,e,Re(),e.stylesWithoutHost,!1),ne}function Pe(t,e,n,r){return K(t,e,n,r),ne(),Pe}var Yv=(t,e,n,r,i,o)=>(nn(!0),Eu(r,i,lm()));function pS(t,e,n,r,i,o){let s=e[Mt],a=!s||Ai()||Zs(s,o);if(nn(a),a)return Eu(r,i,lm());let c=na(s,t,e,n);return Mm(s,o)&&Qs(s,o,c.nextSibling),s&&(hm(n)||pm(c))&&Bs(n)&&($C(n),fv(c)),c}function gS(){Yv=pS}var mS=(t,e,n,r)=>(nn(!0),iv(e[de],""));function vS(t,e,n,r){let i,o=e[Mt],s=!o||Ai();if(nn(s),s)return iv(e[de],"");let a=na(o,t,e,n),c=xD(o,r);return Qs(o,r,a),i=ra(c,a),i}function yS(){mS=vS}var Us="en-US";var _S=Us;function wS(t){typeof t=="string"&&(_S=t.toLowerCase().replace(/_/g,"-"))}function Oe(t,e,n,r){let i=Re(),o=Mi(),s=Pt();return ES(o,i,i[de],s,t,e,r),Oe}function IS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[hi],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function ES(t,e,n,r,i,o,s){let a=Qg(r),l=t.firstCreatePass&&dT(t),u=e[Nt],d=uT(e),f=!0;if(r.type&3||s){let y=ot(r,e),M=s?s(y):y,N=d.length,Q=s?ge=>s(rt(ge[r.index])):r.index,ce=null;if(!s&&a&&(ce=IS(t,e,i,r.index)),ce!==null){let ge=ce.__ngLastListenerFn__||ce;ge.__ngNextListenerFn__=o,ce.__ngLastListenerFn__=o,f=!1}else{o=kg(r,e,u,o,!1);let ge=n.listen(M,i,o);d.push(o,ge),l&&l.push(i,Q,N,N+1)}}else o=kg(r,e,u,o,!1);let h=r.outputs,g;if(f&&h!==null&&(g=h[i])){let y=g.length;if(y)for(let M=0;M<y;M+=2){let N=g[M],Q=g[M+1],ve=e[N][Q].subscribe(o),ye=d.length;if(d.push(o,ve),l){let Wt=typeof ve=="function"?ye+1:-(ye+1);l.push(i,r.index,ye,Wt)}}}}function Og(t,e,n,r){try{return ft(6,e,n),n(r)!==!1}catch(i){return Sv(t,i),!1}finally{ft(7,e,n)}}function kg(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?br(t.index,e):e;Au(a);let c=Og(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=Og(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ke(t,e=""){let n=Re(),r=Mi(),i=t+We,o=r.firstCreatePass?Tu(r,i,1,e,null):r.data[i],s=Kv(r,n,o,e,t);n[i]=s,dm()&&lv(r,n,s,o),Hs(o,!1)}var Kv=(t,e,n,r,i)=>(nn(!0),rv(e[de],r));function CS(t,e,n,r,i){let o=e[Mt],s=!o||Ai()||Zs(o,i);return nn(s),s?rv(e[de],r):na(o,t,e,n)}function DS(){Kv=CS}function Ru(t,e,n){let r=Re(),i=fS(r,t,e,n);return i!==ta&&fT(r,cu(),i),Ru}var bS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=xm(!1,r.type),o=i.length>0?Nu([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(x(ze))});let t=e;return t})();function _t(t){Pi("NgStandalone"),t.getStandaloneInjector=e=>e.get(bS).getOrCreateStandaloneInjector(t)}var tn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Qv=new tn("17.2.3"),sa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Zv=new E("");function Li(t){return!!t&&typeof t.then=="function"}function Jv(t){return!!t&&typeof t.subscribe=="function"}var Xv=new E(""),ey=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=v(Xv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Li(s))r.push(s);else if(Jv(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tr=new E("");function TS(){Sp(()=>{throw new w(600,!1)})}function SS(t){return t.isBoundToModule}function AS(t,e,n){try{let r=n();return Li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var on=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=v(Jm),this.afterRenderEffectManager=v(Bv),this.componentTypes=[],this.components=[],this.isStable=v(ki).hasPendingTasks.pipe(F(r=>!r)),this._injector=v(ze)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof ks;if(!this._injector.get(ey).done){let h=!o&&Hg(r),g=!1;throw new w(405,g)}let a;o?a=r:a=this._injector.get(ia).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=SS(a)?void 0:this._injector.get(en),l=i||a.selector,u=a.create(xe.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(Zv,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),wl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new w(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===Ov)throw new w(103,!1);let o=r===0;for(let{_lView:s,notifyErrorHandler:a}of this._views)!o&&!Il(s)||this.detectChangesInView(s,a,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:s})=>Il(s))&&(i.execute(),!this._views.some(({_lView:s})=>Il(s))))break}}detectChangesInView(r,i,o){let s;o?(s=0,r[b]|=1024):r[b]&64?s=0:s=1,kv(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;wl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Tr,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>wl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new w(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var ms;function xu(t){ms??=new WeakMap;let e=ms.get(t);if(e)return e;let n=t.isStable.pipe(Je(r=>r)).toPromise().then(()=>{});return ms.set(t,n),t.onDestroy(()=>ms?.delete(t)),n}function Il(t){return ou(t)}var Xl=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Pu=(()=>{let e=class e{compileModuleSync(r){return new Jl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Wg(r),s=nv(o.declarations).reduce((a,c)=>{let l=Sn(c);return l&&a.push(new Ci(l)),a},[]);return new Xl(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var MS=(()=>{let e=class e{constructor(){this.zone=v(H),this.applicationRef=v(on)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NS(t){return[{provide:H,useFactory:t},{provide:Nn,multi:!0,useFactory:()=>{let e=v(MS,{optional:!0});return()=>e.initialize()}},{provide:Nn,multi:!0,useFactory:()=>{let e=v(OS);return()=>{e.initialize()}}},{provide:Jm,useFactory:RS}]}function RS(){let t=v(H),e=v(xt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function xS(t){let e=NS(()=>new H(PS(t)));return xn([[],e])}function PS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var OS=(()=>{let e=class e{constructor(){this.subscription=new ee,this.initialized=!1,this.zone=v(H),this.pendingTasks=v(ki)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{H.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{H.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kS(){return typeof $localize<"u"&&$localize.locale||Us}var Ou=new E("",{providedIn:"root",factory:()=>v(Ou,R.Optional|R.SkipSelf)||kS()});var ty=new E("");var Is=null;function LS(t=[],e){return xe.create({name:e,providers:[{provide:Js,useValue:"platform"},{provide:ty,useValue:new Set([()=>Is=null])},...t]})}function FS(t=[]){if(Is)return Is;let e=LS(t);return Is=e,TS(),US(e),e}function US(t){t.get(du,null)?.forEach(n=>n())}function ny(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=FS(r),o=[xS(),...n||[]],a=new Fs({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(H);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(xt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(ty);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),AS(l,c,()=>{let h=a.get(ey);return h.runInitializers(),h.donePromise.then(()=>{let g=a.get(Ou,Us);wS(g||Us);let y=a.get(on);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}var Lg=!1;function jS(){Lg||(Lg=!0,AD(),gS(),DS(),yS(),dS(),aS(),LT(),Gb())}function VS(t,e){return xu(t)}function ry(){return xn([{provide:ps,useFactory:()=>{let t=!0;return gs()&&(t=!!v(Rn,{optional:!0})?.get(Sm,null)),t&&Pi("NgHydration"),t}},{provide:Nn,useValue:()=>{gs()&&v(ps)&&($S(),jS())},multi:!0},{provide:ev,useFactory:()=>gs()&&v(ps)},{provide:Tr,useFactory:()=>{if(gs()&&v(ps)){let t=v(on),e=v(xe);return()=>{VS(t,e).then(()=>{H.assertInAngularZone(),AT(t)})}}return()=>{}},multi:!0}])}function $S(){let t=qs(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===TD){e=n;break}if(!e)throw new w(-507,!1)}var ay=null;function Sr(){return ay}function cy(t){ay??=t}var aa=class{};var qe=new E(""),ly=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(qS),providedIn:"platform"});let t=e;return t})();var qS=(()=>{let e=class e extends ly{constructor(){super(),this._doc=v(qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sr().getBaseHref(this._doc)}onPopState(r){let i=Sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function uy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function iy(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function On(t){return t&&t[0]!=="?"?"?"+t:t}var la=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(dy),providedIn:"root"});let t=e;return t})(),GS=new E(""),dy=(()=>{let e=class e extends la{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??v(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return uy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+On(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+On(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+On(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(ly),x(GS,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fi=(()=>{let e=class e{constructor(r){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=QS(iy(oy(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+On(i))}normalize(r){return e.stripTrailingSlash(KS(this._basePath,oy(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+On(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+On(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=On,e.joinWithSlash=uy,e.stripTrailingSlash=iy,e.\u0275fac=function(i){return new(i||e)(x(la))},e.\u0275prov=C({token:e,factory:()=>YS(),providedIn:"root"});let t=e;return t})();function YS(){return new Fi(x(la))}function KS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function oy(t){return t.replace(/\/index.html$/,"")}function QS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function fy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ku=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=mt({type:e}),e.\u0275inj=yt({});let t=e;return t})(),hy="browser",ZS="server";function Lu(t){return t===ZS}var ca=class{};var da=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var wy=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(wy||{}),Fu=class{constructor(e,n=Iy.Ok,r="OK"){this.headers=e.headers||new da,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var fa=class t extends Fu{constructor(e={}){super(e),this.type=wy.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var Iy=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Iy||{});var XS=new E("");var py="b",gy="h",my="s",vy="st",yy="u",_y="rt",ua=new E(""),e0=["GET","HEAD"];function t0(t,e){let u=v(ua),{isCacheActive:n}=u,r=wp(u,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!e0.includes(o)||i===!1||r.filter?.(t)===!1)return e(t);let s=v(Rn),a=r0(t),c=s.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[py]:d,[_y]:f,[gy]:h,[my]:g,[vy]:y,[yy]:M}=c,N=d;switch(f){case"arraybuffer":N=new TextEncoder().encode(d).buffer;break;case"blob":N=new Blob([d]);break}let Q=new da(h);return I(new fa({body:N,headers:Q,status:g,statusText:y,url:M}))}return e(t).pipe(J(d=>{d instanceof fa&&s.set(a,{[py]:d.body,[gy]:n0(d.headers,l),[my]:d.status,[vy]:d.statusText,[yy]:d.url||"",[_y]:t.responseType})}))}function n0(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function r0(t){let{params:e,method:n,responseType:r,url:i,body:o}=t,s=e.keys().sort().map(u=>`${u}=${e.getAll(u)}`).join("&"),c=[n,r,i,typeof o=="string"?o:"",s].join("|"),l=i0(c);return l}function i0(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Ey(t){return[{provide:ua,useFactory:()=>(Pi("NgHttpTransferCache"),_({isCacheActive:!0},t))},{provide:XS,useValue:t0,multi:!0,deps:[Rn,ua]},{provide:Tr,multi:!0,useFactory:()=>{let e=v(on),n=v(ua);return()=>{xu(e).then(()=>{n.isCacheActive=!1})}}}]}var Vu=class extends aa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$u=class t extends Vu{static makeCurrent(){cy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=o0();return n==null?null:s0(n)}resetBaseElement(){Ui=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fy(document.cookie,e)}},Ui=null;function o0(){return Ui=Ui||document.querySelector("base"),Ui?Ui.getAttribute("href"):null}function s0(t){return new URL(t,document.baseURI).pathname}var a0=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Bu=new E(""),Ty=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new w(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(Bu),x(H))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ha=class{constructor(e){this._doc=e}},Uu="ng-app-id",Sy=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Lu(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Uu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Uu),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Uu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(qe),x(Ys),x(fu,8),x(st))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ju={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zu=/%COMP%/g,Ay="%COMP%",c0=`_nghost-${Ay}`,l0=`_ngcontent-${Ay}`,u0=!0,d0=new E("",{providedIn:"root",factory:()=>u0});function f0(t){return l0.replace(zu,t)}function h0(t){return c0.replace(zu,t)}function My(t,e){return e.map(n=>n.replace(zu,t))}var Cy=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Lu(c),this.defaultRenderer=new ji(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===pt.ShadowDom&&(i=Z(_({},i),{encapsulation:pt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof pa?o.applyToHost(r):o instanceof Vi&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case pt.Emulated:s=new pa(l,u,i,this.appId,d,a,c,f);break;case pt.ShadowDom:return new Hu(l,u,r,i,a,c,this.nonce,f);default:s=new Vi(l,u,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(Ty),x(Sy),x(Ys),x(d0),x(qe),x(st),x(H),x(fu))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ji=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ju[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Dy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Dy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=ju[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ju[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Pn.DashCase|Pn.Important)?e.style.setProperty(n,r,i&Pn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Pn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Dy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hu=class extends ji{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=My(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vi=class extends ji{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?My(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},pa=class extends Vi{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=f0(l),this.hostAttr=h0(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},p0=(()=>{let e=class e extends ha{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(x(qe))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),by=["alt","control","meta","shift"],g0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},m0={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},v0=(()=>{let e=class e extends ha{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),by.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=g0[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),by.forEach(a=>{if(a!==o){let c=m0[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(qe))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Ny(t,e){return ny(_({rootComponent:t},y0(e)))}function y0(t){return{appProviders:[...C0,...t?.providers??[]],platformProviders:E0}}function _0(){$u.makeCurrent()}function w0(){return new xt}function I0(){return gm(document),document}var E0=[{provide:st,useValue:hy},{provide:du,useValue:_0,multi:!0},{provide:qe,useFactory:I0,deps:[]}];var C0=[{provide:Js,useValue:"root"},{provide:xt,useFactory:w0,deps:[]},{provide:Bu,useClass:p0,multi:!0,deps:[qe,H,st]},{provide:Bu,useClass:v0,multi:!0,deps:[qe]},Cy,Sy,Ty,{provide:Ei,useExisting:Cy},{provide:ca,useClass:a0,deps:[]},[]];var Ry=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(qe))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wu=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(Wu||{});function xy(...t){let e=[],n=new Set,r=n.has(Wu.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return xn([[],ry(),n.has(Wu.NoHttpTransferCache)||r?[]:Ey({}),e])}var S="primary",to=Symbol("RouteTitle"),Qu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xr(t){return new Qu(t)}function b0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function T0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wt(t[n],e[n]))return!1;return!0}function wt(t,e){let n=t?Zu(t):void 0,r=e?Zu(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Uy(t[i],e[i]))return!1;return!0}function Zu(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Uy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function jy(t){return t.length>0?t[t.length-1]:null}function cn(t){return nl(t)?t:Li(t)?te(Promise.resolve(t)):I(t)}var S0={exact:$y,subset:By},Vy={exact:A0,subset:M0,ignored:()=>!0};function Py(t,e,n){return S0[n.paths](t.root,e.root,n.matrixParams)&&Vy[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function A0(t,e){return wt(t,e)}function $y(t,e,n){if(!Ln(t.segments,e.segments)||!va(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!$y(t.children[r],e.children[r],n))return!1;return!0}function M0(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Uy(t[n],e[n]))}function By(t,e,n){return Hy(t,e,e.segments,n)}function Hy(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ln(i,n)||e.hasChildren()||!va(i,n,r))}else if(t.segments.length===n.length){if(!Ln(t.segments,n)||!va(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!By(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ln(t.segments,i)||!va(t.segments,i,r)||!t.children[S]?!1:Hy(t.children[S],e,o,r)}}function va(t,e,n){return e.every((r,i)=>Vy[n](t[i].parameters,r.parameters))}var sn=class{constructor(e=new W([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xr(this.queryParams),this._queryParamMap}toString(){return x0.serialize(this)}},W=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ya(this)}},kn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xr(this.parameters),this._parameterMap}toString(){return zy(this)}};function N0(t,e){return Ln(t,e)&&t.every((n,r)=>wt(n.parameters,e[r].parameters))}function Ln(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function R0(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===S&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==S&&(n=n.concat(e(i,r)))}),n}var Cd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new wa,providedIn:"root"});let t=e;return t})(),wa=class{parse(e){let n=new Xu(e);return new sn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${$i(e.root,!0)}`,r=k0(e.queryParams),i=typeof e.fragment=="string"?`#${P0(e.fragment)}`:"";return`${n}${r}${i}`}},x0=new wa;function ya(t){return t.segments.map(e=>zy(e)).join("/")}function $i(t,e){if(!t.hasChildren())return ya(t);if(e){let n=t.children[S]?$i(t.children[S],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==S&&r.push(`${i}:${$i(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=R0(t,(r,i)=>i===S?[$i(t.children[S],!1)]:[`${i}:${$i(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[S]!=null?`${ya(t)}/${n[0]}`:`${ya(t)}/(${n.join("//")})`}}function Wy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ga(t){return Wy(t).replace(/%3B/gi,";")}function P0(t){return encodeURI(t)}function Ju(t){return Wy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _a(t){return decodeURIComponent(t)}function Oy(t){return _a(t.replace(/\+/g,"%20"))}function zy(t){return`${Ju(t.path)}${O0(t.parameters)}`}function O0(t){return Object.entries(t).map(([e,n])=>`;${Ju(e)}=${Ju(n)}`).join("")}function k0(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ga(n)}=${ga(i)}`).join("&"):`${ga(n)}=${ga(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var L0=/^[^\/()?;#]+/;function qu(t){let e=t.match(L0);return e?e[0]:""}var F0=/^[^\/()?;=#]+/;function U0(t){let e=t.match(F0);return e?e[0]:""}var j0=/^[^=?&#]+/;function V0(t){let e=t.match(j0);return e?e[0]:""}var $0=/^[^&#]+/;function B0(t){let e=t.match($0);return e?e[0]:""}var Xu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new W([],{}):new W([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[S]=new W(e,n)),r}parseSegment(){let e=qu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new w(4009,!1);return this.capture(e),new kn(_a(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=U0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=qu(this.remaining);i&&(r=i,this.capture(r))}e[_a(n)]=_a(r)}parseQueryParam(e){let n=V0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=B0(this.remaining);s&&(r=s,this.capture(r))}let i=Oy(n),o=Oy(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new w(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=S);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[S]:new W([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new w(4011,!1)}};function qy(t){return t.segments.length>0?new W([],{[S]:t}):t}function Gy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Gy(i);if(r===S&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new W(t.segments,e);return H0(n)}function H0(t){if(t.numberOfChildren===1&&t.children[S]){let e=t.children[S];return new W(t.segments.concat(e.segments),e.children)}return t}function Pr(t){return t instanceof sn}function W0(t,e,n=null,r=null){let i=Yy(t);return Ky(i,e,n,r)}function Yy(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new W(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=qy(r);return e??i}function Ky(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Gu(i,i,i,n,r);let o=z0(e);if(o.toRoot())return Gu(i,i,new W([],{}),n,r);let s=q0(o,i,t),a=s.processChildren?Wi(s.segmentGroup,s.index,o.commands):Zy(s.segmentGroup,s.index,o.commands);return Gu(i,s.segmentGroup,a,n,r)}function Ia(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Gi(t){return typeof t=="object"&&t!=null&&t.outlets}function Gu(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=Qy(t,e,n);let a=qy(Gy(s));return new sn(a,o,i)}function Qy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Qy(o,e,n)}),new W(t.segments,r)}var Ea=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ia(r[0]))throw new w(4003,!1);let i=r.find(Gi);if(i&&i!==jy(r))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function z0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ea(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ea(n,e,r)}var Nr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function q0(t,e,n){if(t.isAbsolute)return new Nr(e,!0,0);if(!n)return new Nr(e,!1,NaN);if(n.parent===null)return new Nr(n,!0,0);let r=Ia(t.commands[0])?0:1,i=n.segments.length-1+r;return G0(n,i,t.numberOfDoubleDots)}function G0(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new w(4005,!1);i=r.segments.length}return new Nr(r,!1,i-o)}function Y0(t){return Gi(t[0])?t[0].outlets:{[S]:t}}function Zy(t,e,n){if(t??=new W([],{}),t.segments.length===0&&t.hasChildren())return Wi(t,e,n);let r=K0(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new W(t.segments.slice(0,r.pathIndex),{});return o.children[S]=new W(t.segments.slice(r.pathIndex),t.children),Wi(o,0,i)}else return r.match&&i.length===0?new W(t.segments,{}):r.match&&!t.hasChildren()?ed(t,e,n):r.match?Wi(t,0,i):ed(t,e,n)}function Wi(t,e,n){if(n.length===0)return new W(t.segments,{});{let r=Y0(n),i={};if(Object.keys(r).some(o=>o!==S)&&t.children[S]&&t.numberOfChildren===1&&t.children[S].segments.length===0){let o=Wi(t.children[S],e,n);return new W(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Zy(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new W(t.segments,i)}}function K0(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Gi(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ly(c,l,s))return o;r+=2}else{if(!Ly(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ed(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Gi(o)){let c=Q0(o.outlets);return new W(r,c)}if(i===0&&Ia(n[0])){let c=t.segments[e];r.push(new kn(c.path,ky(n[0]))),i++;continue}let s=Gi(o)?o.outlets[S]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ia(a)?(r.push(new kn(s,ky(a))),i+=2):(r.push(new kn(s,{})),i++)}return new W(r,{})}function Q0(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ed(new W([],{}),0,r))}),e}function ky(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ly(t,e,n){return t==n.path&&wt(e,n.parameters)}var zi="imperative",fe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(fe||{}),Ye=class{constructor(e,n){this.id=e,this.url=n}},Yi=class extends Ye{constructor(e,n,r="imperative",i=null){super(e,n),this.type=fe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fn=class extends Ye{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=fe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ge=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ge||{}),td=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(td||{}),an=class extends Ye{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Un=class extends Ye{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationSkipped}},Ki=class extends Ye{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=fe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ca=class extends Ye{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nd=class extends Ye{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rd=class extends Ye{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=fe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},id=class extends Ye{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends Ye{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sd=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ad=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cd=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ld=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ud=class{constructor(e){this.snapshot=e,this.type=fe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{constructor(e){this.snapshot=e,this.type=fe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qi=class{},Zi=class{constructor(e){this.url=e}};var fd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ma,this.attachRef=null}},Ma=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new fd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Da=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=hd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=hd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pd(e,this._root).map(n=>n.value)}};function hd(t,e){if(t===e.value)return e;for(let n of e.children){let r=hd(t,n);if(r)return r}return null}function pd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=pd(t,n);if(r.length)return r.unshift(e),r}return[]}var Le=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ba=class extends Da{constructor(e,n){super(e),this.snapshot=n,bd(this,e)}toString(){return this.snapshot.toString()}};function Jy(t){let e=Z0(t),n=new le([new kn("",{})]),r=new le({}),i=new le({}),o=new le({}),s=new le(""),a=new Or(n,r,o,s,i,S,t,e.root);return a.snapshot=e.root,new ba(new Le(a,[]),e)}function Z0(t){let e={},n={},r={},i="",o=new Ji([],e,r,i,n,S,t,null,{});return new Ta("",new Le(o,[]))}var Or=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(F(l=>l[to]))??I(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(F(e=>xr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(F(e=>xr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&e_(i)&&(r.resolve[to]=i.title),r}var Ji=class{get title(){return this.data?.[to]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ta=class extends Da{constructor(e,n){super(n),this.url=e,bd(this,n)}toString(){return Xy(this._root)}};function bd(t,e){e.value._routerState=t,e.children.forEach(n=>bd(t,n))}function Xy(t){let e=t.children.length>0?` { ${t.children.map(Xy).join(", ")} } `:"";return`${t.value}${e}`}function Yu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wt(e.params,n.params)||t.paramsSubject.next(n.params),T0(e.url,n.url)||t.urlSubject.next(n.url),wt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gd(t,e){let n=wt(t.params,e.params)&&N0(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||gd(t.parent,e.parent))}function e_(t){return typeof t.title=="string"||t.title===null}var Td=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=S,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=v(Ma),this.location=v(oa),this.changeDetector=v(Oi),this.environmentInjector=v(ze),this.inputBinder=v(Sd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new w(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new md(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=tu({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xs]});let t=e;return t})(),md=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Or?this.route:e===Ma?this.childContexts:this.parent.get(e,n)}},Sd=new E("");function J0(t,e,n){let r=Xi(t,e._root,n?n._root:void 0);return new ba(r,e)}function Xi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=X0(t,e,n);return new Le(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xi(t,a)),s}}let r=eA(e.value),i=e.children.map(o=>Xi(t,o));return new Le(r,i)}}function X0(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Xi(t,r,i);return Xi(t,r)})}function eA(t){return new Or(new le(t.url),new le(t.params),new le(t.queryParams),new le(t.fragment),new le(t.data),t.outlet,t.component,t)}var t_="ngNavigationCancelingError";function n_(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Pr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r_(!1,Ge.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function r_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[t_]=!0,n.cancellationCode=e,n}function tA(t){return i_(t)&&Pr(t.url)}function i_(t){return!!t&&t[t_]}var nA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gt({type:e,selectors:[["ng-component"]],standalone:!0,features:[_t],decls:1,vars:0,template:function(i,o){i&1&&Pe(0,"router-outlet")},dependencies:[Td],encapsulation:2});let t=e;return t})();function rA(t,e){return t.providers&&!t._injector&&(t._injector=Nu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ad(t){let e=t.children&&t.children.map(Ad),n=e?Z(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==S&&(n.component=nA),n}function It(t){return t.outlet||S}function iA(t,e){let n=t.filter(r=>It(r)===e);return n.push(...t.filter(r=>It(r)!==e)),n}function no(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var oA=(t,e,n,r)=>F(i=>(new vd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),vd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Mr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Mr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ld(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Yu(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Yu(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=no(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Sa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rr=class{constructor(e,n){this.component=e,this.route=n}};function sA(t,e,n){let r=t._root,i=e?e._root:null;return Bi(r,i,n,[r.value])}function aA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Lr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!mm(t)?t:e.get(t):r}function Bi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Mr(e);return t.children.forEach(s=>{cA(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qi(a,n.getContext(s),i)),i}function cA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=lA(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sa(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bi(t,e,a?a.children:null,r,i):Bi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rr(a.outlet.component,s))}else s&&qi(e,a,i),i.canActivateChecks.push(new Sa(r)),o.component?Bi(t,null,a?a.children:null,r,i):Bi(t,null,n,r,i);return i}function lA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ln(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ln(t.url,e.url)||!wt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gd(t,e)||!wt(t.queryParams,e.queryParams);case"paramsChange":default:return!gd(t,e)}}function qi(t,e,n){let r=Mr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?qi(s,e.children.getContext(o),n):qi(s,null,n):qi(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Rr(e.outlet.component,i)):n.canDeactivateChecks.push(new Rr(null,i)):n.canDeactivateChecks.push(new Rr(null,i))}function ro(t){return typeof t=="function"}function uA(t){return typeof t=="boolean"}function dA(t){return t&&ro(t.canLoad)}function fA(t){return t&&ro(t.canActivate)}function hA(t){return t&&ro(t.canActivateChild)}function pA(t){return t&&ro(t.canDeactivate)}function gA(t){return t&&ro(t.canMatch)}function o_(t){return t instanceof St||t?.name==="EmptyError"}var ma=Symbol("INITIAL_VALUE");function kr(){return Ve(t=>us(t.map(e=>e.pipe(At(1),al(ma)))).pipe(F(e=>{for(let n of e)if(n!==!0){if(n===ma)return ma;if(n===!1||n instanceof sn)return n}return!0}),je(e=>e!==ma),At(1)))}function mA(t,e){return re(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?I(Z(_({},n),{guardsResult:!0})):vA(s,r,i,t).pipe(re(a=>a&&uA(a)?yA(r,o,t,e):I(a)),F(a=>Z(_({},n),{guardsResult:a})))})}function vA(t,e,n,r){return te(t).pipe(re(i=>CA(i.component,i.route,n,e,r)),Je(i=>i!==!0,!0))}function yA(t,e,n,r){return te(e).pipe(bn(i=>pr(wA(i.route.parent,r),_A(i.route,r),EA(t,i.path,n),IA(t,i.route,n))),Je(i=>i!==!0,!0))}function _A(t,e){return t!==null&&e&&e(new ud(t)),I(!0)}function wA(t,e){return t!==null&&e&&e(new cd(t)),I(!0)}function IA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return I(!0);let i=r.map(o=>ds(()=>{let s=no(e)??n,a=Lr(o,s),c=fA(a)?a.canActivate(e,t):rn(s,()=>a(e,t));return cn(c).pipe(Je())}));return I(i).pipe(kr())}function EA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>aA(s)).filter(s=>s!==null).map(s=>ds(()=>{let a=s.guards.map(c=>{let l=no(s.node)??n,u=Lr(c,l),d=hA(u)?u.canActivateChild(r,t):rn(l,()=>u(r,t));return cn(d).pipe(Je())});return I(a).pipe(kr())}));return I(o).pipe(kr())}function CA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return I(!0);let s=o.map(a=>{let c=no(e)??i,l=Lr(a,c),u=pA(l)?l.canDeactivate(t,e,n,r):rn(c,()=>l(t,e,n,r));return cn(u).pipe(Je())});return I(s).pipe(kr())}function DA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return I(!0);let o=i.map(s=>{let a=Lr(s,t),c=dA(a)?a.canLoad(e,n):rn(t,()=>a(e,n));return cn(c)});return I(o).pipe(kr(),s_(r))}function s_(t){return Yc(J(e=>{if(Pr(e))throw n_(t,e)}),F(e=>e===!0))}function bA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return I(!0);let o=i.map(s=>{let a=Lr(s,t),c=gA(a)?a.canMatch(e,n):rn(t,()=>a(e,n));return cn(c)});return I(o).pipe(kr(),s_(r))}var eo=class{constructor(e){this.segmentGroup=e||null}},Aa=class extends Error{constructor(e){super(),this.urlTree=e}};function Ar(t){return hr(new eo(t))}function TA(t){return hr(new w(4e3,!1))}function SA(t){return hr(r_(!1,Ge.GuardRejected))}var yd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return I(r);if(i.numberOfChildren>1||!i.children[S])return TA(e.redirectTo);i=i.children[S]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Aa(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new sn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new W(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new w(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},_d={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AA(t,e,n,r,i){let o=Md(t,e,n);return o.matched?(r=rA(e,r),bA(r,e,n,i).pipe(F(s=>s===!0?o:_({},_d)))):I(o)}function Md(t,e,n){if(e.path==="**")return MA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},_d):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||b0)(n,t,e);if(!i)return _({},_d);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function MA(t){return{matched:!0,parameters:t.length>0?jy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Fy(t,e,n,r){return n.length>0&&xA(t,n,r)?{segmentGroup:new W(e,RA(r,new W(n,t.children))),slicedSegments:[]}:n.length===0&&PA(t,n,r)?{segmentGroup:new W(t.segments,NA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new W(t.segments,t.children),slicedSegments:n}}function NA(t,e,n,r){let i={};for(let o of n)if(Na(t,e,o)&&!r[It(o)]){let s=new W([],{});i[It(o)]=s}return _(_({},r),i)}function RA(t,e){let n={};n[S]=e;for(let r of t)if(r.path===""&&It(r)!==S){let i=new W([],{});n[It(r)]=i}return n}function xA(t,e,n){return n.some(r=>Na(t,e,r)&&It(r)!==S)}function PA(t,e,n){return n.some(r=>Na(t,e,r))}function Na(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function OA(t,e,n,r){return It(t)!==r&&(r===S||!Na(e,n,t))?!1:Md(e,t,n).matched}function kA(t,e,n){return e.length===0&&!t.children[n]}var wd=class{};function LA(t,e,n,r,i,o,s="emptyOnly"){return new Id(t,e,n,r,i,s,o).recognize()}var FA=31,Id=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new yd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new w(4002,`'${e.segmentGroup}'`)}recognize(){let e=Fy(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(F(n=>{let r=new Ji([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},S,this.rootComponentType,null,{}),i=new Le(r,n),o=new Ta("",i),s=W0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,S).pipe(Yt(r=>{if(r instanceof Aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof eo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Dd(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(F(o=>o instanceof Le?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return te(i).pipe(bn(o=>{let s=r.children[o],a=iA(n,o);return this.processSegmentGroup(e,a,s,o)}),sl((o,s)=>(o.push(...s),o)),Kt(null),ol(),re(o=>{if(o===null)return Ar(r);let s=a_(o);return UA(s),I(s)}))}processSegment(e,n,r,i,o,s){return te(n).pipe(bn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Yt(c=>{if(c instanceof eo)return I(null);throw c}))),Je(a=>!!a),Yt(a=>{if(o_(a))return kA(r,i,o)?I(new wd):Ar(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return OA(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ar(i):Ar(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Md(n,i,o);if(!a)return Ar(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>FA&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(re(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=AA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Ve(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new Ji(u,f,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,VA(r),It(r),r.component??r._loadedComponent??null,r,$A(r)),{segmentGroup:g,slicedSegments:y}=Fy(n,u,d,c);if(y.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(F(N=>N===null?null:new Le(h,N)));if(c.length===0&&y.length===0)return I(new Le(h,[]));let M=It(r)===o;return this.processSegment(l,c,g,y,M?S:o,!0).pipe(F(N=>new Le(h,N instanceof Le?[N]:[])))}))):Ar(n)))}getChildConfig(e,n,r){return n.children?I({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?I({routes:n._loadedRoutes,injector:n._loadedInjector}):DA(e,n,r,this.urlSerializer).pipe(re(i=>i?this.configLoader.loadChildren(e,n).pipe(J(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):SA(n))):I({routes:[],injector:e})}};function UA(t){t.sort((e,n)=>e.value.outlet===S?-1:n.value.outlet===S?1:e.value.outlet.localeCompare(n.value.outlet))}function jA(t){let e=t.value.routeConfig;return e&&e.path===""}function a_(t){let e=[],n=new Set;for(let r of t){if(!jA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=a_(r.children);e.push(new Le(r.value,i))}return e.filter(r=>!n.has(r))}function VA(t){return t.data||{}}function $A(t){return t.resolve||{}}function BA(t,e,n,r,i,o){return re(s=>LA(t,e,n,r,s.extractedUrl,i,o).pipe(F(({state:a,tree:c})=>Z(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function HA(t,e){return re(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return I(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of c_(c))s.add(l);let a=0;return te(s).pipe(bn(c=>o.has(c)?WA(c,r,t,e):(c.data=Dd(c,c.parent,t).resolve,I(void 0))),J(()=>a++),mr(1),re(c=>a===s.size?I(n):Ue))})}function c_(t){let e=t.children.map(n=>c_(n)).flat();return[t,...e]}function WA(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!e_(i)&&(o[to]=i.title),zA(o,t,e,r).pipe(F(s=>(t._resolvedData=s,t.data=Dd(t,t.parent,n).resolve,null)))}function zA(t,e,n,r){let i=Zu(t);if(i.length===0)return I({});let o={};return te(i).pipe(re(s=>qA(t[s],e,n,r).pipe(Je(),J(a=>{o[s]=a}))),mr(1),il(o),Yt(s=>o_(s)?Ue:hr(s)))}function qA(t,e,n,r){let i=no(e)??r,o=Lr(t,i),s=o.resolve?o.resolve(e,n):rn(i,()=>o(e,n));return cn(s)}function Ku(t){return Ve(e=>{let n=t(e);return n?te(n).pipe(F(()=>e)):I(e)})}var l_=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===S);return i}getResolvedTitleForRoute(r){return r.data[to]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(GA),providedIn:"root"});let t=e;return t})(),GA=(()=>{let e=class e extends l_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(Ry))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nd=new E("",{providedIn:"root",factory:()=>({})}),Rd=new E(""),YA=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=v(Pu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return I(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=cn(r.loadComponent()).pipe(F(u_),J(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),gr(()=>{this.componentLoaders.delete(r)})),o=new lr(i,()=>new Se).pipe(cr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return I({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=KA(i,this.compiler,r,this.onLoadEndListener).pipe(gr(()=>{this.childrenLoaders.delete(i)})),a=new lr(s,()=>new Se).pipe(cr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KA(t,e,n,r){return cn(t.loadChildren()).pipe(F(u_),re(i=>i instanceof Di||Array.isArray(i)?I(i):te(e.compileModuleAsync(i))),F(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Rd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ad),injector:o}}))}function QA(t){return t&&typeof t=="object"&&"default"in t}function u_(t){return QA(t)?t.default:t}var xd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(ZA),providedIn:"root"});let t=e;return t})(),ZA=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JA=new E("");var XA=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=v(YA),this.environmentInjector=v(ze),this.urlSerializer=v(Cd),this.rootContexts=v(Ma),this.location=v(Fi),this.inputBindingEnabled=v(Sd,{optional:!0})!==null,this.titleStrategy=v(l_),this.options=v(Nd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=v(xd),this.createViewTransition=v(JA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let r=o=>this.events.next(new sd(o)),i=o=>this.events.next(new ad(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Z(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new le({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zi,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(je(s=>s.id!==0),F(s=>Z(_({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ve(s=>{this.currentTransition=s;let a=!1,c=!1;return I(s).pipe(J(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Z(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ve(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Un(l.id,this.urlSerializer.serialize(l.rawUrl),f,td.IgnoredSameUrlNavigation)),l.resolve(null),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return I(l).pipe(Ve(f=>{let h=this.transitions?.getValue();return this.events.next(new Yi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Ue:Promise.resolve(f)}),BA(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),J(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Z(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Ca(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:g,restoredState:y,extras:M}=l,N=new Yi(f,this.urlSerializer.serialize(h),g,y);this.events.next(N);let Q=Jy(this.rootComponentType).snapshot;return this.currentTransition=s=Z(_({},l),{targetSnapshot:Q,urlAfterRedirects:h,extras:Z(_({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,I(s)}else{let f="";return this.events.next(new Un(l.id,this.urlSerializer.serialize(l.extractedUrl),f,td.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ue}}),J(l=>{let u=new nd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),F(l=>(this.currentTransition=s=Z(_({},l),{guards:sA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),mA(this.environmentInjector,l=>this.events.next(l)),J(l=>{if(s.guardsResult=l.guardsResult,Pr(l.guardsResult))throw n_(this.urlSerializer,l.guardsResult);let u=new rd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),je(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ge.GuardRejected),!1)),Ku(l=>{if(l.guards.canActivateChecks.length)return I(l).pipe(J(u=>{let d=new id(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ve(u=>{let d=!1;return I(u).pipe(HA(this.paramsInheritanceStrategy,this.environmentInjector),J({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ge.NoDataFromResolver)}}))}),J(u=>{let d=new od(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Ku(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(J(h=>{d.component=h}),F(()=>{})));for(let h of d.children)f.push(...u(h));return f};return us(u(l.targetSnapshot.root)).pipe(Kt(null),At(1))}),Ku(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?te(d).pipe(F(()=>s)):I(s)}),F(l=>{let u=J0(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Z(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),J(()=>{this.events.next(new Qi)}),oA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),At(1),J({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),cl(this.transitionAbortSubject.pipe(J(l=>{throw l}))),gr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ge.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yt(l=>{if(c=!0,i_(l))this.events.next(new an(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),tA(l)?this.events.next(new Zi(l.url)):s.resolve(!1);else{this.events.next(new Ki(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Ue}))}))}cancelNavigationTransition(r,i,o){let s=new an(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eM(t){return t!==zi}var tM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(nM),providedIn:"root"});let t=e;return t})(),Ed=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},nM=(()=>{let e=class e extends Ed{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=wu(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),d_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>v(rM),providedIn:"root"});let t=e;return t})(),rM=(()=>{let e=class e extends d_{constructor(){super(...arguments),this.location=v(Fi),this.urlSerializer=v(Cd),this.options=v(Nd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=v(xd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Yi)this.stateMemento=this.createStateMemento();else if(r instanceof Un)this.rawUrlTree=i.initialUrl;else if(r instanceof Ca){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Qi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof an&&(r.code===Ge.GuardRejected||r.code===Ge.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ki?this.restoreHistory(i,!0):r instanceof Fn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=wu(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Hi||{});function iM(t,e){t.events.pipe(je(n=>n instanceof Fn||n instanceof an||n instanceof Ki||n instanceof Un),F(n=>n instanceof Fn||n instanceof Un?Hi.COMPLETE:(n instanceof an?n.code===Ge.Redirect||n.code===Ge.SupersededByNewNavigation:!1)?Hi.REDIRECTING:Hi.FAILED),je(n=>n!==Hi.REDIRECTING),At(1)).subscribe(()=>{e()})}function oM(t){throw t}var sM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ra=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=v(sa),this.stateManager=v(d_),this.options=v(Nd,{optional:!0})||{},this.pendingTasks=v(ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=v(XA),this.urlSerializer=v(Cd),this.location=v(Fi),this.urlHandlingStrategy=v(xd),this._events=new Se,this.errorHandler=this.options.errorHandler||oM,this.navigated=!1,this.routeReuseStrategy=v(tM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=v(Rd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!v(Sd,{optional:!0}),this.eventsSubscription=new ee,this.isNgZoneEnabled=v(H)instanceof H&&H.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof an&&i.code!==Ge.Redirect&&i.code!==Ge.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Fn)this.navigated=!0;else if(i instanceof Zi){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||eM(o.source)};this.scheduleNavigation(a,zi,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}lM(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=_({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ad),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=Yy(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return Ky(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Pr(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,zi,null,i)}navigate(r,i={skipLocationChange:!1}){return cM(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=_({},sM):i===!1?o=_({},aM):o=i,Pr(r))return Py(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Py(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return iM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new w(4008,!1)}function lM(t){return!(t instanceof Qi)&&!(t instanceof Zi)}var uM=new E("");function f_(t,...e){return xn([{provide:Rd,multi:!0,useValue:t},[],{provide:Or,useFactory:dM,deps:[Ra]},{provide:Tr,multi:!0,useFactory:fM},e.map(n=>n.\u0275providers)])}function dM(t){return t.routerState.root}function fM(){let t=v(xe);return e=>{let n=t.get(on);if(e!==n.components[0])return;let r=t.get(Ra),i=t.get(hM);t.get(pM)===1&&r.initialNavigation(),t.get(gM,null,R.Optional)?.setUpPreloading(),t.get(uM,null,R.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hM=new E("",{factory:()=>new Se}),pM=new E("",{providedIn:"root",factory:()=>1});var gM=new E("");var h_=(()=>{let e=class e{git(r){window.open(r,"_blank")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gt({type:e,selectors:[["app-footer"]],standalone:!0,features:[_t],decls:19,vars:0,consts:[[1,"footer"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person"],["d","M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"],[1,"git",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-github"],["d","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"]],template:function(i,o){i&1&&(K(0,"div",0)(1,"button",1),Oe("click",function(){return o.git("https://github.com/priscilacavalcante")}),Ni(),K(2,"svg",2),Pe(3,"path",3),ne(),Ws(),K(4,"span"),ke(5,"Priscila da Silva Cavalcante"),ne()(),K(6,"button",1),Oe("click",function(){return o.git("https://github.com/rfspereir")}),Ni(),K(7,"svg",2),Pe(8,"path",3),ne(),Ws(),K(9,"span"),ke(10,"Rafael Felipe Silva Pereira"),ne()(),K(11,"button",1),Oe("click",function(){return o.git("https://github.com/rafamesquita")}),Ni(),K(12,"svg",2),Pe(13,"path",3),ne(),Ws(),K(14,"span"),ke(15,"Rafaela Mesquita Gontijo"),ne()(),K(16,"button",4),Oe("click",function(){return o.git("https://github.com/rfspereir/ProActive")}),Ni(),K(17,"svg",5),Pe(18,"path",6),ne()()())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;background-color:#a58355;padding:15px 0}button[_ngcontent-%COMP%]{background-color:#a58355;border:0;cursor:pointer}span[_ngcontent-%COMP%]{letter-spacing:.12rem;font-family:Inter Tight;margin-right:60px;margin-left:55px}svg[_ngcontent-%COMP%]{margin-left:35px;position:absolute}.git[_ngcontent-%COMP%]{background-color:#a58355;border:0;position:absolute;right:85px;cursor:pointer}"]});let t=e;return t})();var Od={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw jn(e)},jn=function(t){return new Error("Firebase Database ("+Od.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var g_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Pa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new kd;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Fd=function(t){let e=g_(t);return Pa.encodeByteArray(e,!0)},io=function(t){return Fd(t).replace(/\./g,"")},oo=function(t){try{return Pa.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m_(t){return v_(void 0,t)}function v_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!yM(n)||(t[n]=v_(t[n],e[n]));return t}function yM(t){return t!=="__proto__"}function _M(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wM=()=>_M().__FIREBASE_DEFAULTS__,IM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&oo(t[1]);return e&&JSON.parse(e)},Ud=()=>{try{return wM()||IM()||EM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jd=t=>{var e,n;return(n=(e=Ud())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},y_=t=>{let e=jd(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vd=()=>{var t;return(t=Ud())===null||t===void 0?void 0:t.config},$d=t=>{var e;return(e=Ud())===null||e===void 0?void 0:e[`_${t}`]};var ln=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function __(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[io(JSON.stringify(n)),io(JSON.stringify(s)),""].join(".")}function he(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function so(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(he())}function w_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Oa(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I_(){let t=he();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Et(){return Od.NODE_CLIENT===!0||Od.NODE_ADMIN===!0}function E_(){try{return typeof indexedDB=="object"}catch{return!1}}function C_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var CM="FirebaseError",ct=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}},Ot=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DM(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ct(i,a,r)}};function DM(t,e){return t.replace(bM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bM=/\{\$([^}]+)}/g;function Fr(t){return JSON.parse(t)}function ie(t){return JSON.stringify(t)}var D_=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=Fr(oo(o[0])||""),n=Fr(oo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var b_=function(t){let e=D_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},T_=function(t){let e=D_(t).claims;return typeof e=="object"&&e.admin===!0};function Ct(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ao(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function co(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ur(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(p_(o)&&p_(s)){if(!Ur(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function p_(t){return t!==null&&typeof t=="object"}function $n(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var xa=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function S_(t,e){let n=new Ld(t,e);return n.subscribe.bind(n)}var Ld=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pd),i.error===void 0&&(i.error=Pd),i.complete===void 0&&(i.complete=Pd);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pd(){}function ka(t,e){return`${t} failed: ${e} argument `}var A_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lo=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var i2=4*60*60*1e3;function Fe(t){return t&&t._delegate?t._delegate:t}var Ke=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bn="[DEFAULT]";var La=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ln;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AM(e))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Bn){return this.instances.has(e)}getOptions(e=Bn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bn){return this.component?this.component.multipleInstances?e:Bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SM(t){return t===Bn?void 0:t}function AM(t){return t.instantiationMode==="EAGER"}var uo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new La(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var MM=[],z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(z||{}),NM={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},RM=z.INFO,xM={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},PM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=xM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},un=class{constructor(e){this.name=e,this._logLevel=RM,this._logHandler=PM,this._userLogHandler=null,MM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...e),this._logHandler(this,z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...e),this._logHandler(this,z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,z.INFO,...e),this._logHandler(this,z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,z.WARN,...e),this._logHandler(this,z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...e),this._logHandler(this,z.ERROR,...e)}};var OM=(t,e)=>e.some(n=>t instanceof n),M_,N_;function kM(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LM(){return N_||(N_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var R_=new WeakMap,Hd=new WeakMap,x_=new WeakMap,Bd=new WeakMap,zd=new WeakMap;function FM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Dt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&R_.set(n,t)}).catch(()=>{}),zd.set(e,t),e}function UM(t){if(Hd.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Hd.set(t,e)}var Wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P_(t){Wd=t(Wd)}function jM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Fa(this),e,...n);return x_.set(r,e.sort?e.sort():[e]),Dt(r)}:LM().includes(t)?function(...e){return t.apply(Fa(this),e),Dt(R_.get(this))}:function(...e){return Dt(t.apply(Fa(this),e))}}function VM(t){return typeof t=="function"?jM(t):(t instanceof IDBTransaction&&UM(t),OM(t,kM())?new Proxy(t,Wd):t)}function Dt(t){if(t instanceof IDBRequest)return FM(t);if(Bd.has(t))return Bd.get(t);let e=VM(t);return e!==t&&(Bd.set(t,e),zd.set(e,t)),e}var Fa=t=>zd.get(t);function k_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Dt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Dt(s.result),c.oldVersion,c.newVersion,Dt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var $M=["get","getKey","getAll","getAllKeys","count"],BM=["put","add","delete","clear"],qd=new Map;function O_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qd.get(e))return qd.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=BM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$M.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return qd.set(e,o),o}P_(t=>Z(_({},t),{get:(e,n,r)=>O_(e,n)||t.get(e,n,r),has:(e,n)=>!!O_(e,n)||t.has(e,n)}));var Yd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HM(t){let e=t.getComponent();return e?.type==="VERSION"}var Kd="@firebase/app",L_="0.9.29";var Hn=new un("@firebase/app"),WM="@firebase/app-compat",zM="@firebase/analytics-compat",qM="@firebase/analytics",GM="@firebase/app-check-compat",YM="@firebase/app-check",KM="@firebase/auth",QM="@firebase/auth-compat",ZM="@firebase/database",JM="@firebase/database-compat",XM="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",rN="@firebase/messaging",iN="@firebase/messaging-compat",oN="@firebase/performance",sN="@firebase/performance-compat",aN="@firebase/remote-config",cN="@firebase/remote-config-compat",lN="@firebase/storage",uN="@firebase/storage-compat",dN="@firebase/firestore",fN="@firebase/firestore-compat",hN="firebase",pN="10.9.0";var Qd="[DEFAULT]",gN={[Kd]:"fire-core",[WM]:"fire-core-compat",[qM]:"fire-analytics",[zM]:"fire-analytics-compat",[YM]:"fire-app-check",[GM]:"fire-app-check-compat",[KM]:"fire-auth",[QM]:"fire-auth-compat",[ZM]:"fire-rtdb",[JM]:"fire-rtdb-compat",[XM]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[rN]:"fire-fcm",[iN]:"fire-fcm-compat",[oN]:"fire-perf",[sN]:"fire-perf-compat",[aN]:"fire-rc",[cN]:"fire-rc-compat",[lN]:"fire-gcs",[uN]:"fire-gcs-compat",[dN]:"fire-fst",[fN]:"fire-fst-compat","fire-js":"fire-js",[hN]:"fire-js-all"};var fo=new Map,Zd=new Map;function mN(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fn(t){let e=t.name;if(Zd.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(let n of fo.values())mN(n,t);return!0}function po(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},dn=new Ot("app","Firebase",vN);var Jd=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}};var hn=pN;function tf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Qd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw dn.create("bad-app-name",{appName:String(i)});if(n||(n=Vd()),!n)throw dn.create("no-options");let o=fo.get(i);if(o){if(Ur(n,o.options)&&Ur(r,o.config))return o;throw dn.create("duplicate-app",{appName:i})}let s=new uo(i);for(let c of Zd.values())s.addComponent(c);let a=new Jd(n,r,s);return fo.set(i,a),a}function jr(t=Qd){let e=fo.get(t);if(!e&&t===Qd&&Vd())return tf();if(!e)throw dn.create("no-app",{appName:t});return e}function Ua(){return Array.from(fo.values())}function oe(t,e,n){var r;let i=(r=gN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}fn(new Ke(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var yN="firebase-heartbeat-database",_N=1,ho="firebase-heartbeat-store",Gd=null;function V_(){return Gd||(Gd=k_(yN,_N,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),Gd}function wN(t){return p(this,null,function*(){try{let n=(yield V_()).transaction(ho),r=yield n.objectStore(ho).get($_(t));return yield n.done,r}catch(e){if(e instanceof ct)Hn.warn(e.message);else{let n=dn.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}})}function F_(t,e){return p(this,null,function*(){try{let r=(yield V_()).transaction(ho,"readwrite");yield r.objectStore(ho).put(e,$_(t)),yield r.done}catch(n){if(n instanceof ct)Hn.warn(n.message);else{let r=dn.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(r.message)}}})}function $_(t){return`${t.name}!${t.options.appId}`}var IN=1024,EN=30*24*60*60*1e3,Xd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ef(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=U_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=EN}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=U_(),{heartbeatsToSend:r,unsentEntries:i}=CN(this._heartbeatsCache.heartbeats),o=io(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function U_(){return new Date().toISOString().substring(0,10)}function CN(t,e=IN){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),j_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),j_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ef=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return E_()?C_().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function j_(t){return io(JSON.stringify({version:2,heartbeats:t})).length}function DN(t){fn(new Ke("platform-logger",e=>new Yd(e),"PRIVATE")),fn(new Ke("heartbeat",e=>new Xd(e),"PRIVATE")),oe(Kd,L_,t),oe(Kd,L_,"esm2017"),oe("fire-js","")}DN("");var bN="firebase",TN="10.9.0";oe(bN,TN,"app");var zn=new tn("ANGULARFIRE2_VERSION");function Va(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var go=(t,e)=>{let n=e?[e]:Ua(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},$r=class{constructor(){return go(SN)}},SN="app-check";function Vr(){}var ja=class{zone;delegate;constructor(e,n=el){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},nf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vr,{},Vr,Vr)),n.pipe(J({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Br=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ja(Zone.current)),this.insideAngular=n.run(()=>new ja(Zone.current,Xc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(x(H))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $a(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function AN(t){return $a().ngZone.runOutsideAngular(()=>t())}function Wn(t){return $a().ngZone.run(()=>t())}function MN(t){return NN($a())(t)}function NN(t){return function(n){return n=n.lift(new nf(t.ngZone)),n.pipe(Gt(t.outsideAngular),qt(t.insideAngular))}}var RN=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Wn(()=>t.apply(void 0,r))},kt=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Wn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vr,{},Vr,Vr))),r[o]=RN(r[o],n));let i=AN(()=>t.apply(this,r));if(!e)if(i instanceof V){let o=$a();return i.pipe(Gt(o.outsideAngular),qt(o.insideAngular))}else return Wn(()=>i);return i instanceof V?i.pipe(MN):i instanceof Promise?Wn(()=>new Promise((o,s)=>i.then(a=>Wn(()=>o(a)),a=>Wn(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Wn(()=>i)};var Lt=class{constructor(e){return e}},qn=class{constructor(){return Ua()}};function xN(t){return t&&t.length===1?t[0]:new Lt(jr())}var rf=new E("angularfire2._apps"),PN={provide:Lt,useFactory:xN,deps:[[new we,rf]]},ON={provide:qn,deps:[[new we,rf]]};function kN(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Lt(r)}}var LN=(()=>{class t{constructor(n){oe("angularfire",zn.full,"core"),oe("angularfire",zn.full,"app"),oe("angular",Qv.full,n.toString())}static \u0275fac=function(r){return new(r||t)(x(st))};static \u0275mod=mt({type:t});static \u0275inj=yt({providers:[PN,ON]})}return t})();function B_(t,...e){return{ngModule:LN,providers:[{provide:rf,useFactory:kN(t),multi:!0,deps:[H,xe,Br,...e]}]}}var H_=kt(tf,!0);function rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iw=rw,ow=new Ot("auth","Firebase",rw());var Ga=new un("@firebase/auth");function FN(t,...e){Ga.logLevel<=z.WARN&&Ga.warn(`Auth (${hn}): ${t}`,...e)}function Ha(t,...e){Ga.logLevel<=z.ERROR&&Ga.error(`Auth (${hn}): ${t}`,...e)}function gn(t,...e){throw Df(t,...e)}function Gn(t,...e){return Df(t,...e)}function UN(t,e,n){let r=Object.assign(Object.assign({},iw()),{[e]:n});return new Ot("auth","Firebase",r).create(e,{appName:t.name})}function Df(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ow.create(t,...e)}function T(t,e,...n){if(!t)throw Df(e,...n)}function Ft(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ha(e),new Error(e)}function mn(t,e){t||Ft(e)}function cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jN(){return W_()==="http:"||W_()==="https:"}function W_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function VN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jN()||w_()||"connection"in navigator)?navigator.onLine:!0}function $N(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Yn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,mn(n>e,"Short delay should be less than long delay!"),this.isMobile=so()||Oa()}get(){return VN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bf(t,e){mn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ya=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HN=new Yn(3e4,6e4);function Tf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Hr(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return sw(t,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=$n(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Ya.fetch()(aw(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function sw(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},BN),e);try{let i=new lf(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ba(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ba(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ba(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ba(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw UN(t,u,l);gn(t,u)}}catch(i){if(i instanceof ct)throw i;gn(t,"network-request-failed",{message:String(i)})}})}function WN(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield Hr(t,e,n,r,i);return"mfaPendingCredential"in l&&gn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function aw(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?bf(t.config,i):`${t.config.apiScheme}://${i}`}var lf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),HN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ba(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Gn(t,e,r);return i.customData._tokenResponse=n,i}function zN(t,e){return p(this,null,function*(){return Hr(t,"POST","/v1/accounts:delete",e)})}function qN(t,e){return p(this,null,function*(){return Hr(t,"POST","/v1/accounts:lookup",e)})}function mo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sf(t,e=!1){return p(this,null,function*(){let n=Fe(t),r=yield n.getIdToken(e),i=Af(r);T(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:mo(of(i.auth_time)),issuedAtTime:mo(of(i.iat)),expirationTime:mo(of(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function of(t){return Number(t)*1e3}function Af(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ha("JWT malformed, contained fewer than 3 sections"),null;try{let i=oo(n);return i?JSON.parse(i):(Ha("Failed to decode base64 JWT payload"),null)}catch(i){return Ha("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GN(t){let e=Af(t);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vo(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ct&&YN(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function YN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var uf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ka=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qa(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield vo(t,qN(n,{idToken:r}));T(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?QN(o.providerUserInfo):[],a=KN(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ka(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Mf(t){return p(this,null,function*(){let e=Fe(t);yield Qa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function KN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QN(t){return t.map(e=>{var{providerId:n}=e,r=tl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function ZN(t,e){return p(this,null,function*(){let n=yield sw(t,{},()=>p(this,null,function*(){let r=$n({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=aw(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ya.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JN(t,e){return p(this,null,function*(){return Hr(t,"POST","/v2/accounts:revokeToken",Tf(t,e))})}var Za=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return T(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield ZN(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(T(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(T(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(T(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ft("not implemented")}};function pn(t,e){T(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var yo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=tl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ka(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield vo(this,this.stsTokenManager.getToken(this.auth,e));return T(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Sf(this,e)}reload(){return Mf(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Qa(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield vo(this,zN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,N=(l=n.createdAt)!==null&&l!==void 0?l:void 0,Q=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ce,emailVerified:ge,isAnonymous:ve,providerData:ye,stsTokenManager:Wt}=n;T(ce&&Wt,e,"internal-error");let Uc=Za.fromJSON(this.name,Wt);T(typeof ce=="string",e,"internal-error"),pn(d,e.name),pn(f,e.name),T(typeof ge=="boolean",e,"internal-error"),T(typeof ve=="boolean",e,"internal-error"),pn(h,e.name),pn(g,e.name),pn(y,e.name),pn(M,e.name),pn(N,e.name),pn(Q,e.name);let oi=new t({uid:ce,auth:e,email:f,emailVerified:ge,displayName:d,isAnonymous:ve,photoURL:g,phoneNumber:h,tenantId:y,stsTokenManager:Uc,createdAt:N,lastLoginAt:Q});return ye&&Array.isArray(ye)&&(oi.providerData=ye.map(PE=>Object.assign({},PE))),M&&(oi._redirectEventId=M),oi}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Za;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qa(o),o})}};var z_=new Map;function Ut(t){mn(t instanceof Function,"Expected a class definition");let e=z_.get(t);return e?(mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z_.set(t,e),e)}var XN=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),df=XN;function Wa(t,e,n){return`firebase:${t}:${e}:${n}`}var Ja=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Wa(this.userKey,i.apiKey,o),this.fullPersistenceKey=Wa("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?yo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Ut(df),e,r);let i=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Ut(df),s=Wa(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=yo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function q_(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fw(e))return"Blackberry";if(hw(e))return"Webos";if(Nf(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(dw(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function cw(t=he()){return/firefox\//i.test(t)}function Nf(t=he()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(t=he()){return/crios\//i.test(t)}function uw(t=he()){return/iemobile/i.test(t)}function dw(t=he()){return/android/i.test(t)}function fw(t=he()){return/blackberry/i.test(t)}function hw(t=he()){return/webos/i.test(t)}function sc(t=he()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eR(t=he()){var e;return sc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tR(){return I_()&&document.documentMode===10}function pw(t=he()){return sc(t)||dw(t)||hw(t)||fw(t)||/windows phone/i.test(t)||uw(t)}function nR(){try{return!!(window&&window!==window.top)}catch{return!1}}function gw(t,e=[]){let n;switch(t){case"Browser":n=q_(he());break;case"Worker":n=`${q_(he())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hn}/${r}`}var ff=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function rR(n){return p(this,arguments,function*(t,e={}){return Hr(t,"GET","/v2/passwordPolicy",Tf(t,e))})}var iR=6,hf=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:iR,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var pf=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xa(this),this.idTokenSubscription=new Xa(this),this.beforeStateQueue=new ff(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ut(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ja.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Qa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$N()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?Fe(e):null;return n&&T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Ut(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield rR(this),n=new hf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ot("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JN(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ut(e)||this._popupRedirectResolver;T(n,this,"argument-error"),this.redirectPersistenceManager=yield Ja.create(this,[Ut(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&FN(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Rf(t){return Fe(t)}var Xa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=S_(n=>this.observer=n)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xf={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(t){xf=t}function sR(t){return xf.loadJS(t)}function aR(){return xf.gapiScript}function mw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Pf(t,e){let n=po(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Ur(o,e??{}))return i;gn(i,"already-initialized")}return n.initialize({options:e})}function cR(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ut);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Of(t,e,n){let r=Rf(t);T(r._canInitEmulator,r,"emulator-config-failed"),T(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=vw(e),{host:s,port:a}=lR(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||uR()}function vw(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lR(t){let e=vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:G_(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:G_(s)}}}function G_(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function uR(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ec=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ft("not implemented")}_getIdTokenResponse(e){return Ft("not implemented")}_linkToIdToken(e,n){return Ft("not implemented")}_getReauthenticationResolver(e){return Ft("not implemented")}};function sf(t,e){return p(this,null,function*(){return WN(t,"POST","/v1/accounts:signInWithIdp",Tf(t,e))})}var tc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var gf=class extends tc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var _o=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let o=yield yo._fromIdTokenResponse(e,r,i),s=Y_(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Y_(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var mf=class t extends ct{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function yw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(t,o,e,r):o})}function dR(t,e,n=!1){return p(this,null,function*(){let r=yield vo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return _o._forOperation(t,"link",r)})}function fR(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t,i="reauthenticate";try{let o=yield vo(t,yw(r,i,e,t),n);T(o.idToken,r,"internal-error");let s=Af(o.idToken);T(s,r,"internal-error");let{sub:a}=s;return T(t.uid===a,r,"user-mismatch"),_o._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&gn(r,"user-mismatch"),o}})}function hR(t,e,n=!1){return p(this,null,function*(){let r="signIn",i=yield yw(t,r,e),o=yield _o._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function kf(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function Lf(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}var nc="__sak";var rc=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function pR(){let t=he();return Nf(t)||sc(t)}var gR=1e3,mR=10,vR=(()=>{class t extends rc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pR()&&nR(),this.fallbackToPolling=pw(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);tR()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,mR):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield wn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield wn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield wn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),_w=vR;var yR=(()=>{class t extends rc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ff=yR;function _R(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var wR=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield _R(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ww(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var vf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=ww("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function bt(){return window}function IR(t){bt().location.href=t}function Iw(){return typeof bt().WorkerGlobalScope<"u"&&typeof bt().importScripts=="function"}function ER(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function CR(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DR(){return Iw()?self:null}var Ew="firebaseLocalStorageDb",bR=1,ic="firebaseLocalStorage",Cw="fbase_key",Kn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ac(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function TR(){let t=indexedDB.deleteDatabase(Ew);return new Kn(t).toPromise()}function yf(){let t=indexedDB.open(Ew,bR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ic,{keyPath:Cw})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),yield TR(),e(yield yf()))}))})}function K_(t,e,n){return p(this,null,function*(){let r=ac(t,!0).put({[Cw]:e,value:n});return new Kn(r).toPromise()})}function SR(t,e){return p(this,null,function*(){let n=ac(t,!1).get(e),r=yield new Kn(n).toPromise();return r===void 0?null:r.value})}function Q_(t,e){let n=ac(t,!0).delete(e);return new Kn(n).toPromise()}var AR=800,MR=3,NR=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield yf(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>MR)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return Iw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=wR._getInstance(DR()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield ER(),!this.activeServiceWorker)return;this.sender=new vf(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||CR()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield yf();return yield K_(n,nc,"1"),yield Q_(n,nc),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>K_(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>SR(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>Q_(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=ac(o,!1).getAll();return new Kn(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),AR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Dw=NR;var Q2=mw("rcb"),Z2=new Yn(3e4,6e4);function RR(t,e){return e?Ut(e):(T(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var wo=class extends ec{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sf(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function xR(t){return hR(t.auth,new wo(t),t.bypassAuthState)}function PR(t){let{auth:e,user:n}=t;return T(n,e,"internal-error"),fR(n,new wo(t),t.bypassAuthState)}function OR(t){return p(this,null,function*(){let{auth:e,user:n}=t;return T(n,e,"internal-error"),dR(n,new wo(t),t.bypassAuthState)})}var _f=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return PR;default:gn(this.auth,"internal-error")}}resolve(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var J2=new Yn(2e3,1e4);var kR="pendingRedirect",za=new Map,wf=class t extends _f{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=za.get(this.auth._key());if(!e){try{let r=(yield LR(this.resolver,this.auth))?yield wn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}za.set(this.auth._key(),e)}return this.bypassAuthState||za.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return wn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,wn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function LR(t,e){return p(this,null,function*(){let n=jR(e),r=UR(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function FR(t,e){za.set(t._key(),e)}function UR(t){return Ut(t._redirectPersistence)}function jR(t){return Wa(kR,t.config.apiKey,t.name)}function VR(t,e,n=!1){return p(this,null,function*(){let r=Rf(t),i=RR(r,e),s=yield new wf(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var $R=10*60*1e3,If=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$R&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}};function Z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bw({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function BR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(t);default:return!1}}function HR(n){return p(this,arguments,function*(t,e={}){return Hr(t,"GET","/v1/projects",e)})}var WR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zR=/^https?/;function qR(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield HR(t);for(let n of e)try{if(GR(n))return}catch{}gn(t,"unauthorized-domain")})}function GR(t){let e=cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!zR.test(n))return!1;if(WR.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var YR=new Yn(3e4,6e4);function J_(){let t=bt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KR(t){return new Promise((e,n)=>{var r,i,o;function s(){J_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J_(),n(Gn(t,"network-request-failed"))},timeout:YR.get()})}if(!((i=(r=bt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=bt().gapi)===null||o===void 0)&&o.load)s();else{let a=mw("iframefcb");return bt()[a]=()=>{gapi.load?s():n(Gn(t,"network-request-failed"))},sR(`${aR()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw qa=null,e})}var qa=null;function QR(t){return qa=qa||KR(t),qa}var ZR=new Yn(5e3,15e3),JR="__/auth/iframe",XR="emulator/auth/iframe",ex={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nx(t){let e=t.config;T(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?bf(e,XR):`https://${t.config.authDomain}/${JR}`,r={apiKey:e.apiKey,appName:t.name,v:hn},i=tx.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${$n(r).slice(1)}`}function rx(t){return p(this,null,function*(){let e=yield QR(t),n=bt().gapi;return T(n,t,"internal-error"),e.open({where:document.body,url:nx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ex,dontclear:!0},r=>new Promise((i,o)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Gn(t,"network-request-failed"),a=bt().setTimeout(()=>{o(s)},ZR.get());function c(){bt().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var ix={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ox=500,sx=600,ax="_blank",cx="http://localhost",oc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function lx(t,e,n,r=ox,i=sx){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},ix),{width:r.toString(),height:i.toString(),top:o,left:s}),l=he().toLowerCase();n&&(a=lw(l)?ax:n),cw(l)&&(e=e||cx,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(eR(l)&&a!=="_self")return ux(e||"",a),new oc(null);let d=window.open(e||"",a,u);T(d,t,"popup-blocked");try{d.focus()}catch{}return new oc(d)}function ux(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var dx="__/auth/handler",fx="emulator/auth/handler",hx=encodeURIComponent("fac");function X_(t,e,n,r,i,o){return p(this,null,function*(){T(t.config.authDomain,t,"auth-domain-config-required"),T(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hn,eventId:i};if(e instanceof tc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",ao(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof gf){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${hx}=${encodeURIComponent(c)}`:"";return`${px(t)}?${$n(a).slice(1)}${l}`})}function px({config:t}){return t.emulator?bf(t,fx):`https://${t.authDomain}/${dx}`}var af="webStorageSupport",Ef=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ff,this._completeRedirectFn=VR,this._overrideRedirectResult=FR}_openPopup(e,n,r,i){return p(this,null,function*(){var o;mn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield X_(e,n,r,cf(),i);return lx(e,s,ww())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let o=yield X_(e,n,r,cf(),i);return IR(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(mn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield rx(e),r=new If(e);return n.register("authEvent",i=>(T(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(af,{type:af},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[af];s!==void 0&&n(!!s),gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pw()||Nf()||sc()}},Tw=Ef;var ew="@firebase/auth",tw="1.6.2";var Cf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mx(t){fn(new Ke("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;T(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gw(t)},l=new pf(r,i,o,c);return cR(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new Ke("auth-internal",e=>{let n=Rf(e.getProvider("auth").getImmediate());return(r=>new Cf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oe(ew,tw,gx(t)),oe(ew,tw,"esm2017")}var vx=5*60,yx=$d("authIdTokenMaxAge")||vx,nw=null,_x=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yx)return;let i=n?.token;nw!==i&&(nw=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Uf(t=jr()){let e=po(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Pf(t,{popupRedirectResolver:Tw,persistence:[Dw,_w,Ff]}),r=$d("authTokenSyncURL");if(r&&r.match(/^\/[^\/].*/)){let o=_x(r);Lf(n,o,()=>o(n.currentUser)),kf(n,s=>o(s))}let i=jd("auth");return i&&Of(n,`http://${i}`),n}function wx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oR({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Gn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",wx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mx("Browser");var Sw="auth",Io=class{constructor(e){return e}},Eo=class{constructor(){return go(Sw)}};var jf=new E("angularfire2.auth-instances");function pP(t,e){let n=Va(Sw,t,e);return n&&new Io(n)}function gP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Io(r)}}var mP={provide:Eo,deps:[[new we,jf]]},vP={provide:Io,useFactory:pP,deps:[[new we,jf],Lt]},yP=(()=>{class t{constructor(){oe("angularfire",zn.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=mt({type:t});static \u0275inj=yt({providers:[vP,mP]})}return t})();function Aw(t,...e){return{ngModule:yP,providers:[{provide:jf,useFactory:gP(t),multi:!0,deps:[H,xe,Br,qn,[new we,$r],...e]}]}}var Mw=kt(Uf,!0);var Nw="@firebase/database",Rw="1.0.3";var Wh="";function _P(t){Wh=t}var Gf=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ie(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Yf=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ct(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var uI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Gf(e)}}catch{}return new Yf},Zn=uI("localStorage"),Kf=uI("sessionStorage");var qr=new un("@firebase/database"),wP=function(){let t=1;return function(){return t++}}(),dI=function(t){let e=A_(t),n=new xa;n.update(e);let r=n.digest();return Pa.encodeByteArray(r)},jo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=jo.apply(null,r):typeof r=="object"?e+=ie(r):e+=r,e+=" "}return e},Xn=null,xw=!0,IP=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qr.logLevel=z.VERBOSE,Xn=qr.log.bind(qr),e&&Kf.set("logging_enabled",!0)):typeof t=="function"?Xn=t:(Xn=null,Kf.remove("logging_enabled"))},me=function(...t){if(xw===!0&&(xw=!1,Xn===null&&Kf.get("logging_enabled")===!0&&IP(!0)),Xn){let e=jo.apply(null,t);Xn(e)}},Vo=function(t){return function(...e){me(t,...e)}},Qf=function(...t){let e="FIREBASE INTERNAL ERROR: "+jo(...t);qr.error(e)},jt=function(...t){let e=`FIREBASE FATAL ERROR: ${jo(...t)}`;throw qr.error(e),new Error(e)},Ee=function(...t){let e="FIREBASE WARNING: "+jo(...t);qr.warn(e)},EP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ee("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},CP=function(t){if(Et()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kr="[MIN_NAME]",er="[MAX_NAME]",ni=function(t,e){if(t===e)return 0;if(t===Kr||e===er)return-1;if(e===Kr||t===er)return 1;{let n=Pw(t),r=Pw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},DP=function(t,e){return t===e?0:t<e?-1:1},Co=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ie(e))},zh=function(t){if(typeof t!="object"||t===null)return ie(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ie(e[r]),n+=":",n+=zh(t[e[r]]);return n+="}",n},hI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ce(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var pI=function(t){m(!fI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},bP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},TP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function SP(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var AP=new RegExp("^-?(0*)\\d{1,10}$"),MP=-2147483648,NP=2147483647,Pw=function(t){if(AP.test(t)){let e=Number(t);if(e>=MP&&e<=NP)return e}return null},ri=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Ee("Exception was thrown by user callback.",n),e},Math.floor(0))}},RP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ao=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Zf=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ee(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Jf=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ee(e)}},Mo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),lc="5",gI="v",mI="s",vI="r",yI="f",_I=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wI="ls",II="p",Xf="ac",EI="websocket",CI="long_polling";var uc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function xP(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function DI(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===EI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);xP(t)&&(n.ns=t.namespace);let i=[];return Ce(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var eh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ct(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return m_(this.counters_)}};var Vf={},$f={};function qh(t){let e=t.toString();return Vf[e]||(Vf[e]=new eh),Vf[e]}function PP(t,e){let n=t.toString();return $f[n]||($f[n]=e()),$f[n]}var th=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ri(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Ow="start",OP="close",kP="pLPCommand",LP="pRTLPCB",bI="id",TI="pw",SI="ser",FP="cb",UP="seg",jP="ts",VP="d",$P="dframe",AI=1870,MI=30,BP=AI-MI,HP=25e3,WP=3e4,nh=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vo(e),this.stats_=qh(n),this.urlFn=c=>(this.appCheckToken&&(c[Xf]=this.appCheckToken),DI(n,CI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new th(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WP)),CP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rh((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Ow)this.id=a,this.password=c;else if(s===OP)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Ow]="t",r[SI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FP]=this.scriptTagHolder.uniqueCallbackIdentifier),r[gI]=lc,this.transportSessionId&&(r[mI]=this.transportSessionId),this.lastSessionId&&(r[wI]=this.lastSessionId),this.applicationId&&(r[II]=this.applicationId),this.appCheckToken&&(r[Xf]=this.appCheckToken),typeof location<"u"&&location.hostname&&_I.test(location.hostname)&&(r[vI]=yI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Et()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!bP()&&!TP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ie(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Fd(n),i=hI(r,BP);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Et())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[$P]="t",r[bI]=e,r[TI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ie(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},rh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Et())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=wP(),window[kP+this.uniqueCallbackIdentifier]=e,window[LP+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){me("frame writing exception"),a.stack&&me(a.stack),me(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||me("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[bI]=this.myID,e[TI]=this.myPW,e[SI]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MI+r.length<=AI;){let s=this.pendingSegs.shift();r=r+"&"+UP+i+"="+s.seg+"&"+jP+i+"="+s.ts+"&"+VP+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(HP)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Et()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{me("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var zP=16384,qP=45e3,dc=null;typeof MozWebSocket<"u"?dc=MozWebSocket:typeof WebSocket<"u"&&(dc=WebSocket);var Do=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vo(this.connId),this.stats_=qh(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[gI]=lc,!Et()&&typeof location<"u"&&location.hostname&&_I.test(location.hostname)&&(a[vI]=yI),r&&(a[mI]=r),i&&(a[wI]=i),o&&(a[Xf]=o),s&&(a[II]=s),DI(n,EI,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zn.set("previous_websocket_failure",!0);try{let i;if(Et()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${lc}/${Wh}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new dc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&dc!==null&&!t.forceDisallow_}static previouslyFailed(){return Zn.isInMemoryStorage||Zn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Fr(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ie(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=hI(r,zP);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qP))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),GP=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[nh,Do]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Do&&Do.isAvailable(),i=r&&!Do.previouslyFailed();if(n.webSocketOnly&&(r||Ee("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Do];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),YP=6e4,KP=5e3,QP=10*1024,ZP=100*1024,Bf="t",kw="d",JP="s",Lw="r",XP="e",Fw="o",Uw="a",jw="n",Vw="p",eO="h",ih=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vo("c:"+this.id+":"),this.transportManager_=new GP(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ao(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ZP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Bf in e){let n=e[Bf];n===Uw?this.upgradeIfSecondaryHealthy_():n===Lw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Co("t",e),r=Co("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Uw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Co("t",e),r=Co("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Co(Bf,e);if(kw in e){let r=e[kw];if(n===eO){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===jw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===JP?this.onConnectionShutdown_(r):n===Lw?this.onReset_(r):n===XP?Qf("Server Error: "+r):n===Fw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qf("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),lc!==r&&Ee("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ao(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(YP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ao(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var hc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var pc=class t extends hc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!so()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $w=32,Bw=768,q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function B(){return new q("")}function P(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yn(t){return t.pieces_.length-t.pieceNum_}function Y(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new q(t.pieces_,e)}function NI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function RI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xI(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new q(e,0)}function se(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new q(n,0)}function k(t){return t.pieceNum_>=t.pieces_.length}function Ie(t,e){let n=P(t),r=P(e);if(n===null)return e;if(n===r)return Ie(Y(t),Y(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Gh(t,e){if(yn(t)!==yn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ut(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(yn(t)>yn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var oh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=RI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=lo(this.parts_[r]);PI(this)}};function nO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=lo(e),PI(t)}function rO(t){let e=t.parts_.pop();t.byteLength_-=lo(e),t.parts_.length>0&&(t.byteLength_-=1)}function PI(t){if(t.byteLength_>Bw)throw new Error(t.errorPrefix_+"has a key path longer than "+Bw+" bytes ("+t.byteLength_+").");if(t.parts_.length>$w)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$w+") or object contains a cycle "+Qn(t))}function Qn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var sh=class t extends hc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var bo=1e3,iO=60*5*1e3,Hw=30*1e3,oO=1.3,sO=3e4,aO="server_kill",Ww=3,Yh=(()=>{class t extends fc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Vo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bo,this.maxReconnectDelay_=iO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Et())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&pc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ie(s)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new ln,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ct(n,"w")){let i=Vn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ee(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||T_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=b_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ie(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Qf("Unrecognized action received from server: "+ie(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sO&&(this.reconnectDelay_=bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oO)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?me("getToken() completed but was canceled"):(me("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new ih(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{Ee(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(aO)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Ee(f),l())}}})}interrupt(n){me("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){me("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ao(this.interruptReasons_)&&(this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>zh(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){me("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ww&&(this.reconnectDelay_=Hw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){me("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ww&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Et()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Wh.replace(/\./g,"-")]=1,so()?n["framework.cordova"]=1:Oa()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=pc.getInstance().currentlyOnline();return ao(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),O=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Qr=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new O(Kr,e),i=new O(Kr,n);return this.compare(r,i)!==0}minPost(){return O.MIN}};var cc,gc=class extends Qr{static get __EMPTY_NODE(){return cc}static set __EMPTY_NODE(e){cc=e}compare(e,n){return ni(e.name,n.name)}isDefinedOn(e){throw jn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return O.MIN}maxPost(){return new O(er,cc)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new O(e,cc)}toString(){return".key"}},Gr=new gc;var zr=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},lt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Qe.EMPTY_NODE,this.right=s??Qe.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Qe.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),ah=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new lt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Qe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,lt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new zr(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new zr(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new zr(this.root_,null,this.comparator_,!0,e)}};Qe.EMPTY_NODE=new ah;function cO(t,e){return ni(t.name,e.name)}function Kh(t,e){return ni(t,e)}var ch;function lO(t){ch=t}var OI=function(t){return typeof t=="number"?"number:"+pI(t):"string:"+t},kI=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ct(e,".sv"),"Priority must be a string or number.")}else m(t===ch||t.isEmpty(),"priority of unexpected type.");m(t===ch||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var zw,Zr=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kI(this.priorityNode_)}static set __childrenNodeConstructor(n){zw=n}static get __childrenNodeConstructor(){return zw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return k(n)?this:P(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=P(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||yn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Y(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+OI(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=pI(this.value_):n+=this.value_,this.lazyHash_=dI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return m(o>=0,"Unknown leaf type: "+r),m(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),LI,FI;function uO(t){LI=t}function dO(t){FI=t}var lh=class extends Qr{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?ni(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return O.MIN}maxPost(){return new O(er,new Zr("[PRIORITY-POST]",FI))}makePost(e,n){let r=LI(e);return new O(n,new Zr("[PRIORITY-POST]",r))}toString(){return".priority"}},X=new lh;var fO=Math.log(2),uh=class{constructor(e){let n=o=>parseInt(Math.log(o)/fO,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},mc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new lt(f,d.node,lt.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),y=i(h+1,l);return d=t[h],f=n?n(d):d,new lt(f,d.node,lt.BLACK,g,y)}},o=function(c){let l=null,u=null,d=t.length,f=function(g,y){let M=d-g,N=d;d-=g;let Q=i(M+1,N),ce=t[M],ge=n?n(ce):ce;h(new lt(ge,ce.node,y,null,Q))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let y=c.nextBitIsOne(),M=Math.pow(2,c.count-(g+1));y?f(M,lt.BLACK):(f(M,lt.BLACK),f(M,lt.RED))}return u},s=new uh(t.length),a=o(s);return new Qe(r||e,a)};var Hf,Wr={},Jr=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(Wr&&X,"ChildrenNode.ts has not been loaded"),Hf=Hf||new t({".priority":Wr},{".priority":X}),Hf}get(e){let n=Vn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qe?n:null}hasIndex(e){return Ct(this.indexSet_,e.toString())}addIndex(e,n){m(e!==Gr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(O.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=mc(r,e.getCompare()):a=Wr;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=co(this.indexes_,(i,o)=>{let s=Vn(this.indexSet_,o);if(m(s,"Missing index implementation for "+o),i===Wr)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(O.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),mc(a,s.getCompare())}else return Wr;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new O(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=co(this.indexes_,i=>{if(i===Wr)return i;{let o=n.get(e.name);return o?i.remove(new O(e.name,o)):i}});return new t(r,this.indexSet_)}};var To,A=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kI(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return To||(To=new t(new Qe(Kh),null,Jr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||To}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?To:r}}getChild(n){let r=P(n);return r===null?this:this.getImmediateChild(r).getChild(Y(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new O(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?To:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=P(n);if(i===null)return r;{m(P(n)!==".priority"||yn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Y(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(X,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+OI(this.getPriority().val())+":"),this.forEachChild(X,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":dI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new O(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new O(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new O(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,O.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,O.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===$o?-1:0}withIndex(n){if(n===Gr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Gr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(X),o=r.getIterator(X),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Gr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),dh=class extends A{constructor(){super(new Qe(Kh),A.EMPTY_NODE,Jr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return A.EMPTY_NODE}isEmpty(){return!1}},$o=new dh;Object.defineProperties(O,{MIN:{value:new O(Kr,A.EMPTY_NODE)},MAX:{value:new O(er,$o)}});gc.__EMPTY_NODE=A.EMPTY_NODE;Zr.__childrenNodeConstructor=A;lO($o);dO($o);var hO=!0;function pe(t,e=null){if(t===null)return A.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Zr(n,pe(e))}if(!(t instanceof Array)&&hO){let n=[],r=!1;if(Ce(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=pe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new O(s,c)))}}),n.length===0)return A.EMPTY_NODE;let o=mc(n,cO,s=>s.name,Kh);if(r){let s=mc(n,X.getCompare());return new A(o,pe(e),new Jr({".priority":s},{".priority":X}))}else return new A(o,pe(e),Jr.Default)}else{let n=A.EMPTY_NODE;return Ce(t,(r,i)=>{if(Ct(t,r)&&r.substring(0,1)!=="."){let o=pe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(pe(e))}}uO(pe);var fh=class extends Qr{constructor(e){super(),this.indexPath_=e,m(!k(e)&&P(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?ni(e.name,n.name):o}makePost(e,n){let r=pe(e),i=A.EMPTY_NODE.updateChild(this.indexPath_,r);return new O(n,i)}maxPost(){let e=A.EMPTY_NODE.updateChild(this.indexPath_,$o);return new O(er,e)}toString(){return RI(this.indexPath_,0).join("/")}};var hh=class extends Qr{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ni(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return O.MIN}maxPost(){return O.MAX}makePost(e,n){let r=pe(e);return new O(n,r)}toString(){return".value"}},pO=new hh;function UI(t){return{type:"value",snapshotNode:t}}function Xr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Po(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var ko=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Po(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Xr(n,r)):s.trackChildChange(Oo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(X,(i,o)=>{n.hasChild(i)||r.trackChildChange(Po(i,o))}),n.isLeafNode()||n.forEachChild(X,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Oo(i,o,s))}else r.trackChildChange(Xr(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?A.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vc=class t{constructor(e){this.indexedFilter_=new ko(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new O(n,r))||(r=A.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=A.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(A.EMPTY_NODE);let o=this;return n.forEachChild(X,(s,a)=>{o.matches(new O(s,a))||(i=i.updateImmediateChild(s,A.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var ph=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new O(n,r))||(r=A.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=A.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=A.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(A.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,A.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new O(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Oo(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Po(n,d));let y=a.updateImmediateChild(n,A.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Xr(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Po(l.name,l.node)),o.trackChildChange(Xr(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,A.EMPTY_NODE)):e}};var gh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=X}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kr}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===X}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function mO(t){return t.loadsAllData()?new ko(t.getIndex()):t.hasLimit()?new ph(t):new vc(t)}function qw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===X?n="$priority":t.index_===pO?n="$value":t.index_===Gr?n="$key":(m(t.index_ instanceof fh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ie(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ie(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ie(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ie(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ie(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Gw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==X&&(e.i=t.index_.toString()),e}var mh=class t extends fc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=qw(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Vn(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=qw(e._queryParams),r=e._path.toString(),i=new ln;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$n(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Fr(a.responseText)}catch{Ee("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ee("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var vh=class{constructor(){this.rootNode_=A.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function yc(){return{value:null,children:new Map}}function jI(t,e,n){if(k(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=P(e);t.children.has(r)||t.children.set(r,yc());let i=t.children.get(r);e=Y(e),jI(i,e,n)}}function yh(t,e,n){t.value!==null?n(e,t.value):vO(t,(r,i)=>{let o=new q(e.toString()+"/"+r);yh(i,o,n)})}function vO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var _h=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ce(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Yw=10*1e3,yO=30*1e3,_O=5*60*1e3,wh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _h(e);let r=Yw+(yO-Yw)*Math.random();Ao(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Ce(e,(i,o)=>{o>0&&Ct(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ao(this.reportStats_.bind(this),Math.floor(Math.random()*2*_O))}};var Tt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Tt||{});function VI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ih=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Tt.ACK_USER_WRITE,this.source=VI()}operationForChild(e){if(k(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new q(e));return new t(B(),n,this.revert)}}else return m(P(this.path)===e,"operationForChild called for unrelated child."),new t(Y(this.path),this.affectedTree,this.revert)}};var _c=class t{constructor(e,n){this.source=e,this.path=n,this.type=Tt.LISTEN_COMPLETE}operationForChild(e){return k(this.path)?new t(this.source,B()):new t(this.source,Y(this.path))}};var ei=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Tt.OVERWRITE}operationForChild(e){return k(this.path)?new t(this.source,B(),this.snap.getImmediateChild(e)):new t(this.source,Y(this.path),this.snap)}};var wc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Tt.MERGE}operationForChild(e){if(k(this.path)){let n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new ei(this.source,B(),n.value):new t(this.source,B(),n)}else return m(P(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Y(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Vt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(k(e))return this.isFullyInitialized()&&!this.filtered_;let n=P(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Eh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function wO(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(gO(s.childName,s.snapshotNode))}),So(t,i,"child_removed",e,r,n),So(t,i,"child_added",e,r,n),So(t,i,"child_moved",o,r,n),So(t,i,"child_changed",e,r,n),So(t,i,"value",e,r,n),i}function So(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>EO(t,a,c)),s.forEach(a=>{let c=IO(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function IO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function EO(t,e,n){if(e.childName==null||n.childName==null)throw jn("Should only compare child_ events.");let r=new O(e.childName,e.snapshotNode),i=new O(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Rc(t,e){return{eventCache:t,serverCache:e}}function No(t,e,n,r){return Rc(new Vt(e,n,r),t.serverCache)}function $I(t,e,n,r){return Rc(t.eventCache,new Vt(e,n,r))}function Ch(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function tr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Wf,CO=()=>(Wf||(Wf=new Qe(DP)),Wf),De=class t{constructor(e,n=CO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Ce(e,(r,i)=>{n=n.set(new q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(k(e))return null;{let r=P(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Y(e),n);return o!=null?{path:se(new q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(k(e))return this;{let n=P(e),r=this.children.get(n);return r!==null?r.subtree(Y(e)):new t(null)}}set(e,n){if(k(e))return new t(n,this.children);{let r=P(e),o=(this.children.get(r)||new t(null)).set(Y(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(k(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=P(e),r=this.children.get(n);if(r){let i=r.remove(Y(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(k(e))return this.value;{let n=P(e),r=this.children.get(n);return r?r.get(Y(e)):null}}setTree(e,n){if(k(e))return n;{let r=P(e),o=(this.children.get(r)||new t(null)).setTree(Y(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(B(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(se(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(k(e))return null;{let o=P(e),s=this.children.get(o);return s?s.findOnPath_(Y(e),se(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(k(e))return this;{this.value&&r(n,this.value);let i=P(e),o=this.children.get(i);return o?o.foreachOnPath_(Y(e),se(n,i),r):new t(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(se(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var dt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new De(null))}};function Ro(t,e,n){if(k(e))return new dt(new De(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Ie(i,e);return o=o.updateChild(s,n),new dt(t.writeTree_.set(i,o))}else{let i=new De(n),o=t.writeTree_.setTree(e,i);return new dt(o)}}}function Kw(t,e,n){let r=t;return Ce(n,(i,o)=>{r=Ro(r,se(e,i),o)}),r}function Qw(t,e){if(k(e))return dt.empty();{let n=t.writeTree_.setTree(e,new De(null));return new dt(n)}}function Dh(t,e){return nr(t,e)!=null}function nr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ie(n.path,e)):null}function Zw(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(X,(r,i)=>{e.push(new O(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new O(r,i.value))}),e}function vn(t,e){if(k(e))return t;{let n=nr(t,e);return n!=null?new dt(new De(n)):new dt(t.writeTree_.subtree(e))}}function bh(t){return t.writeTree_.isEmpty()}function ti(t,e){return BI(B(),t.writeTree_,e)}function BI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(m(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=BI(se(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(se(t,".priority"),r)),n}}function Jh(t,e){return qI(e,t)}function DO(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ro(t.visibleWrites,e,n)),t.lastWriteId=r}function bO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function TO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&SO(a,r.path)?i=!1:ut(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return AO(t),!0;if(r.snap)t.visibleWrites=Qw(t.visibleWrites,r.path);else{let a=r.children;Ce(a,c=>{t.visibleWrites=Qw(t.visibleWrites,se(r.path,c))})}return!0}else return!1}function SO(t,e){if(t.snap)return ut(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ut(se(t.path,n),e))return!0;return!1}function AO(t){t.visibleWrites=HI(t.allWrites,MO,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function MO(t){return t.visible}function HI(t,e,n){let r=dt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)ut(n,s)?(a=Ie(n,s),r=Ro(r,a,o.snap)):ut(s,n)&&(a=Ie(s,n),r=Ro(r,B(),o.snap.getChild(a)));else if(o.children){if(ut(n,s))a=Ie(n,s),r=Kw(r,a,o.children);else if(ut(s,n))if(a=Ie(s,n),k(a))r=Kw(r,B(),o.children);else{let c=Vn(o.children,P(a));if(c){let l=c.getChild(Y(a));r=Ro(r,B(),l)}}}else throw jn("WriteRecord should have .snap or .children")}}return r}function WI(t,e,n,r,i){if(!r&&!i){let o=nr(t.visibleWrites,e);if(o!=null)return o;{let s=vn(t.visibleWrites,e);if(bh(s))return n;if(n==null&&!Dh(s,B()))return null;{let a=n||A.EMPTY_NODE;return ti(s,a)}}}else{let o=vn(t.visibleWrites,e);if(!i&&bh(o))return n;if(!i&&n==null&&!Dh(o,B()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ut(l.path,e)||ut(e,l.path))},a=HI(t.allWrites,s,e),c=n||A.EMPTY_NODE;return ti(a,c)}}}function NO(t,e,n){let r=A.EMPTY_NODE,i=nr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(X,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=vn(t.visibleWrites,e);return n.forEachChild(X,(s,a)=>{let c=ti(vn(o,new q(s)),a);r=r.updateImmediateChild(s,c)}),Zw(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=vn(t.visibleWrites,e);return Zw(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function RO(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=se(e,n);if(Dh(t.visibleWrites,o))return null;{let s=vn(t.visibleWrites,o);return bh(s)?i.getChild(n):ti(s,i.getChild(n))}}function xO(t,e,n,r){let i=se(e,n),o=nr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=vn(t.visibleWrites,i);return ti(s,r.getNode().getImmediateChild(n))}else return null}function PO(t,e){return nr(t.visibleWrites,e)}function OO(t,e,n,r,i,o,s){let a,c=vn(t.visibleWrites,e),l=nr(c,B());if(l!=null)a=l;else if(n!=null)a=ti(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function kO(){return{visibleWrites:dt.empty(),allWrites:[],lastWriteId:-1}}function Ic(t,e,n,r){return WI(t.writeTree,t.treePath,e,n,r)}function Xh(t,e){return NO(t.writeTree,t.treePath,e)}function Jw(t,e,n,r){return RO(t.writeTree,t.treePath,e,n,r)}function Ec(t,e){return PO(t.writeTree,se(t.treePath,e))}function LO(t,e,n,r,i,o){return OO(t.writeTree,t.treePath,e,n,r,i,o)}function ep(t,e,n){return xO(t.writeTree,t.treePath,e,n)}function zI(t,e){return qI(se(t.treePath,e),t.writeTree)}function qI(t,e){return{treePath:t,writeTree:e}}var Th=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Oo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Po(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Xr(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Oo(r,e.snapshotNode,i.oldSnap));else throw jn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Sh=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},GI=new Sh,Lo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Vt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ep(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:tr(this.viewCache_),o=LO(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function FO(t){return{filter:t}}function UO(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function jO(t,e,n,r,i){let o=new Th,s,a;if(n.type===Tt.OVERWRITE){let l=n;l.source.fromUser?s=Ah(t,e,l.path,l.snap,r,i,o):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!k(l.path),s=Cc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Tt.MERGE){let l=n;l.source.fromUser?s=$O(t,e,l.path,l.children,r,i,o):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Mh(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Tt.ACK_USER_WRITE){let l=n;l.revert?s=WO(t,e,l.path,r,i,o):s=BO(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Tt.LISTEN_COMPLETE)s=HO(t,e,n.path,r,o);else throw jn("Unknown operation type: "+n.type);let c=o.getChanges();return VO(e,s,c),{viewCache:s,changes:c}}function VO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ch(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(UI(Ch(e)))}}function YI(t,e,n,r,i,o){let s=e.eventCache;if(Ec(r,n)!=null)return e;{let a,c;if(k(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=tr(e),u=l instanceof A?l:A.EMPTY_NODE,d=Xh(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=Ic(r,tr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=P(n);if(l===".priority"){m(yn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=Jw(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=Y(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=Jw(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=ep(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return No(e,a,s.isFullyInitialized()||k(n),t.filter.filtersNodes())}}function Cc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(k(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=P(n);if(!c.isCompleteForPath(n)&&yn(n)>1)return e;let g=Y(n),M=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),M):l=u.updateChild(c.getNode(),h,M,g,GI,null)}let d=$I(e,l,c.isFullyInitialized()||k(n),u.filtersNodes()),f=new Lo(i,d,o);return YI(t,d,n,i,f,a)}function Ah(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Lo(i,e,o);if(k(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=No(e,l,!0,t.filter.filtersNodes());else{let d=P(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=No(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=Y(n),h=a.getNode().getImmediateChild(d),g;if(k(f))g=r;else{let y=u.getCompleteChild(d);y!=null?NI(f)===".priority"&&y.getChild(xI(f)).isEmpty()?g=y:g=y.updateChild(f,r):g=A.EMPTY_NODE}if(h.equals(g))c=e;else{let y=t.filter.updateChild(a.getNode(),d,g,f,u,s);c=No(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Xw(t,e){return t.eventCache.isCompleteForChild(e)}function $O(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=se(n,c);Xw(e,P(u))&&(a=Ah(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=se(n,c);Xw(e,P(u))||(a=Ah(t,a,u,l,i,o,s))}),a}function eI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Mh(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;k(n)?l=r:l=new De(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),g=eI(t,h,f);c=Cc(t,c,new q(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=e.serverCache.getNode().getImmediateChild(d),y=eI(t,g,f);c=Cc(t,c,new q(d),y,i,o,s,a)}}),c}function BO(t,e,n,r,i,o,s){if(Ec(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(k(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Cc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(k(n)){let l=new De(null);return c.getNode().forEachChild(Gr,(u,d)=>{l=l.set(new q(u),d)}),Mh(t,e,n,l,i,o,a,s)}else return e}else{let l=new De(null);return r.foreach((u,d)=>{let f=se(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Mh(t,e,n,l,i,o,a,s)}}function HO(t,e,n,r,i){let o=e.serverCache,s=$I(e,o.getNode(),o.isFullyInitialized()||k(n),o.isFiltered());return YI(t,s,n,r,GI,i)}function WO(t,e,n,r,i,o){let s;if(Ec(r,n)!=null)return e;{let a=new Lo(r,e,i),c=e.eventCache.getNode(),l;if(k(n)||P(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ic(r,tr(e));else{let d=e.serverCache.getNode();m(d instanceof A,"serverChildren would be complete if leaf node"),u=Xh(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=P(n),d=ep(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Y(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,A.EMPTY_NODE,Y(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Ic(r,tr(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Ec(r,B())!=null,No(e,l,s,t.filter.filtersNodes())}}var Nh=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ko(r.getIndex()),o=mO(r);this.processor_=FO(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(A.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(A.EMPTY_NODE,a.getNode(),null),u=new Vt(c,s.isFullyInitialized(),i.filtersNodes()),d=new Vt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Rc(d,u),this.eventGenerator_=new Eh(this.query_)}get query(){return this.query_}};function zO(t){return t.viewCache_.serverCache.getNode()}function qO(t,e){let n=tr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!k(e)&&!n.getImmediateChild(P(e)).isEmpty())?n.getChild(e):null}function tI(t){return t.eventRegistrations_.length===0}function GO(t,e){t.eventRegistrations_.push(e)}function nI(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function rI(t,e,n,r){e.type===Tt.MERGE&&e.source.queryId!==null&&(m(tr(t.viewCache_),"We should always have a full cache before handling merges"),m(Ch(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=jO(t.processor_,i,e,n,r);return UO(t.processor_,o.viewCache),m(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,KI(t,o.changes,o.viewCache.eventCache.getNode(),null)}function YO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(X,(o,s)=>{r.push(Xr(o,s))}),n.isFullyInitialized()&&r.push(UI(n.getNode())),KI(t,r,n.getNode(),e)}function KI(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return wO(t.eventGenerator_,e,n,i)}var Dc,Rh=class{constructor(){this.views=new Map}};function KO(t){m(!Dc,"__referenceConstructor has already been defined"),Dc=t}function QO(){return m(Dc,"Reference.ts has not been loaded"),Dc}function ZO(t){return t.views.size===0}function tp(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return m(o!=null,"SyncTree gave us an op for an invalid query."),rI(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(rI(s,e,n,r));return o}}function JO(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Ic(n,i?r:null),c=!1;a?c=!0:r instanceof A?(a=Xh(n,r),c=!1):(a=A.EMPTY_NODE,c=!1);let l=Rc(new Vt(a,c,!1),new Vt(r,i,!1));return new Nh(e,l)}return s}function XO(t,e,n,r,i,o){let s=JO(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),GO(s,n),YO(s,n)}function ek(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=_n(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(nI(l,n,r)),tI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(nI(c,n,r)),tI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!_n(t)&&o.push(new(QO())(e._repo,e._path)),{removed:o,events:s}}function QI(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yr(t,e){let n=null;for(let r of t.views.values())n=n||qO(r,e);return n}function ZI(t,e){if(e._queryParams.loadsAllData())return xc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function JI(t,e){return ZI(t,e)!=null}function _n(t){return xc(t)!=null}function xc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var bc;function tk(t){m(!bc,"__referenceConstructor has already been defined"),bc=t}function nk(){return m(bc,"Reference.ts has not been loaded"),bc}var rk=1,Tc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new De(null),this.pendingWriteTree_=kO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function XI(t,e,n,r,i){return DO(t.pendingWriteTree_,e,n,r,i),i?Bo(t,new ei(VI(),e,n)):[]}function Jn(t,e,n=!1){let r=bO(t.pendingWriteTree_,e);if(TO(t.pendingWriteTree_,e)){let o=new De(null);return r.snap!=null?o=o.set(B(),!0):Ce(r.children,s=>{o=o.set(new q(s),!0)}),Bo(t,new Ih(r.path,o,n))}else return[]}function Pc(t,e,n){return Bo(t,new ei(Qh(),e,n))}function ik(t,e,n){let r=De.fromObject(n);return Bo(t,new wc(Qh(),e,r))}function ok(t,e){return Bo(t,new _c(Qh(),e))}function sk(t,e,n){let r=rp(t,n);if(r){let i=ip(r),o=i.path,s=i.queryId,a=Ie(o,e),c=new _c(Zh(s),a);return op(t,o,c)}else return[]}function xh(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||JI(s,e))){let c=ek(s,e,n,r);ZO(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>_n(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=lk(f);for(let g=0;g<h.length;++g){let y=h[g],M=y.query,N=nE(t,y);t.listenProvider_.startListening(xo(M),Sc(t,M),N.hashFn,N.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(xo(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Oc(f));t.listenProvider_.stopListening(xo(f),h)}))}uk(t,l)}return a}function ak(t,e,n,r){let i=rp(t,r);if(i!=null){let o=ip(i),s=o.path,a=o.queryId,c=Ie(s,e),l=new ei(Zh(a),c,n);return op(t,s,l)}else return[]}function ck(t,e,n,r){let i=rp(t,r);if(i){let o=ip(i),s=o.path,a=o.queryId,c=Ie(s,e),l=De.fromObject(n),u=new wc(Zh(a),c,l);return op(t,s,u)}else return[]}function iI(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=Ie(f,i);o=o||Yr(h,g),s=s||_n(h)});let a=t.syncPointTree_.get(i);a?(s=s||_n(a),o=o||Yr(a,B())):(a=new Rh,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=A.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,g)=>{let y=Yr(g,B());y&&(o=o.updateImmediateChild(h,y))}));let l=JI(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Oc(e);m(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=dk();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Jh(t.pendingWriteTree_,i),d=XO(a,e,n,u,o,c);if(!l&&!s&&!r){let f=ZI(a,e);d=d.concat(fk(t,e,f))}return d}function np(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Ie(s,e),l=Yr(a,c);if(l)return l});return WI(i,e,o,n,!0)}function Bo(t,e){return eE(e,t.syncPointTree_,null,Jh(t.pendingWriteTree_,B()))}function eE(t,e,n,r){if(k(t.path))return tE(t,e,n,r);{let i=e.get(B());n==null&&i!=null&&(n=Yr(i,B()));let o=[],s=P(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=zI(r,s);o=o.concat(eE(a,c,l,u))}return i&&(o=o.concat(tp(i,t,r,n))),o}}function tE(t,e,n,r){let i=e.get(B());n==null&&i!=null&&(n=Yr(i,B()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=zI(r,s),u=t.operationForChild(s);u&&(o=o.concat(tE(u,a,c,l)))}),i&&(o=o.concat(tp(i,t,r,n))),o}function nE(t,e){let n=e.query,r=Sc(t,n);return{hashFn:()=>(zO(e)||A.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?sk(t,n._path,r):ok(t,n._path);{let o=SP(i,n);return xh(t,n,null,o)}}}}function Sc(t,e){let n=Oc(e);return t.queryToTagMap.get(n)}function Oc(t){return t._path.toString()+"$"+t._queryIdentifier}function rp(t,e){return t.tagToQueryMap.get(e)}function ip(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}}function op(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Jh(t.pendingWriteTree_,e);return tp(r,n,i,null)}function lk(t){return t.fold((e,n,r)=>{if(n&&_n(n))return[xc(n)];{let i=[];return n&&(i=QI(n)),Ce(r,(o,s)=>{i=i.concat(s)}),i}})}function xo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(nk())(t._repo,t._path):t}function uk(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Oc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function dk(){return rk++}function fk(t,e,n){let r=e._path,i=Sc(t,e),o=nE(t,n),s=t.listenProvider_.startListening(xo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!_n(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!k(l)&&u&&_n(u))return[xc(u).query];{let f=[];return u&&(f=f.concat(QI(u).map(h=>h.query))),Ce(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(xo(u),Sc(t,u))}}return s}var Ph=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Oh=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=se(this.path_,e);return new t(this.syncTree_,n)}node(){return np(this.syncTree_,this.path_)}},hk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},oI=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return pk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return gk(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},pk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},gk=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},mk=function(t,e,n,r){return sp(e,new Oh(n,t),r)},rE=function(t,e,n){return sp(t,new Ph(e),n)};function sp(t,e,n){let r=t.getPriority().val(),i=oI(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=oI(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Zr(a,pe(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Zr(i))),s.forEachChild(X,(a,c)=>{let l=sp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Fo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function ap(t,e){let n=e instanceof q?e:new q(e),r=t,i=P(n);for(;i!==null;){let o=Vn(r.node.children,i)||{children:{},childCount:0};r=new Fo(i,r,o),n=Y(n),i=P(n)}return r}function ii(t){return t.node.value}function iE(t,e){t.node.value=e,kh(t)}function oE(t){return t.node.childCount>0}function vk(t){return ii(t)===void 0&&!oE(t)}function kc(t,e){Ce(t.node.children,(n,r)=>{e(new Fo(n,t,r))})}function sE(t,e,n,r){n&&!r&&e(t),kc(t,i=>{sE(i,e,!0,r)}),n&&r&&e(t)}function yk(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ho(t){return new q(t.parent===null?t.name:Ho(t.parent)+"/"+t.name)}function kh(t){t.parent!==null&&_k(t.parent,t.name,t)}function _k(t,e,n){let r=vk(n),i=Ct(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,kh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,kh(t))}var wk=/[\[\].#$\/\u0000-\u001F\u007F]/,Ik=/[\[\].#$\u0000-\u001F\u007F]/,zf=10*1024*1024,aE=function(t){return typeof t=="string"&&t.length!==0&&!wk.test(t)},cE=function(t){return typeof t=="string"&&t.length!==0&&!Ik.test(t)},Ek=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cE(t)};var Ck=function(t,e,n,r){r&&e===void 0||cp(ka(t,"value"),e,n)},cp=function(t,e,n){let r=n instanceof q?new oh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Qn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Qn(r)+" with contents = "+e.toString());if(fI(e))throw new Error(t+"contains "+e.toString()+" "+Qn(r));if(typeof e=="string"&&e.length>zf/3&&lo(e)>zf)throw new Error(t+"contains a string greater than "+zf+" utf8 bytes "+Qn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Ce(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!aE(s)))throw new Error(t+" contains an invalid key ("+s+") "+Qn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nO(r,s),cp(t,a,r),rO(r)}),i&&o)throw new Error(t+' contains ".value" child '+Qn(r)+" in addition to actual children.")}};var lE=function(t,e,n,r){if(!(r&&n===void 0)&&!cE(n))throw new Error(ka(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lE(t,e,n,r)},bk=function(t,e){if(P(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Tk=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Ek(n))throw new Error(ka(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Lh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function lp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!Gh(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function uE(t,e,n){lp(t,n),dE(t,r=>Gh(r,e))}function $t(t,e,n){lp(t,n),dE(t,r=>ut(r,e)||ut(e,r))}function dE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(Sk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Sk(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Xn&&me("event: "+n.toString()),ri(r)}}}var Ak="repo_interrupt",Mk=25,Fh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yc(),this.transactionQueueTree_=new Fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Nk(t,e,n){if(t.stats_=qh(t.repoInfo_),t.forceRestClient_||RP())t.server_=new mh(t.repoInfo_,(r,i,o,s)=>{sI(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>aI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ie(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Yh(t.repoInfo_,e,(r,i,o,s)=>{sI(t,r,i,o,s)},r=>{aI(t,r)},r=>{xk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=PP(t.repoInfo_,()=>new wh(t.stats_,t.server_)),t.infoData_=new vh,t.infoSyncTree_=new Tc({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Pc(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),dp(t,"connected",!1),t.serverSyncTree_=new Tc({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);$t(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Rk(t){let n=t.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function up(t){return hk({timestamp:Rk(t)})}function sI(t,e,n,r,i){t.dataUpdateCount++;let o=new q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=co(n,l=>pe(l));s=ck(t.serverSyncTree_,o,c,i)}else{let c=pe(n);s=ak(t.serverSyncTree_,o,c,i)}else if(r){let c=co(n,l=>pe(l));s=ik(t.serverSyncTree_,o,c)}else{let c=pe(n);s=Pc(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Lc(t,o)),$t(t.eventQueue_,a,s)}function aI(t,e){dp(t,"connected",e),e===!1&&Ok(t)}function xk(t,e){Ce(e,(n,r)=>{dp(t,n,r)})}function dp(t,e,n){let r=new q("/.info/"+e),i=pe(n);t.infoData_.updateSnapshot(r,i);let o=Pc(t.infoSyncTree_,r,i);$t(t.eventQueue_,r,o)}function fE(t){return t.nextWriteId_++}function Pk(t,e,n,r,i){fp(t,"set",{path:e.toString(),value:n,priority:r});let o=up(t),s=pe(n,r),a=np(t.serverSyncTree_,e),c=rE(s,a,o),l=fE(t),u=XI(t.serverSyncTree_,e,c,l,!0);lp(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||Ee("set at "+e+" failed: "+f);let y=Jn(t.serverSyncTree_,l,!g);$t(t.eventQueue_,e,y),Fk(t,i,f,h)});let d=vE(t,e);Lc(t,d),$t(t.eventQueue_,d,[])}function Ok(t){fp(t,"onDisconnectEvents");let e=up(t),n=yc();yh(t.onDisconnect_,B(),(i,o)=>{let s=mk(i,o,t.serverSyncTree_,e);jI(n,i,s)});let r=[];yh(n,B(),(i,o)=>{r=r.concat(Pc(t.serverSyncTree_,i,o));let s=vE(t,i);Lc(t,s)}),t.onDisconnect_=yc(),$t(t.eventQueue_,B(),r)}function kk(t,e,n){let r;P(e._path)===".info"?r=iI(t.infoSyncTree_,e,n):r=iI(t.serverSyncTree_,e,n),uE(t.eventQueue_,e._path,r)}function cI(t,e,n){let r;P(e._path)===".info"?r=xh(t.infoSyncTree_,e,n):r=xh(t.serverSyncTree_,e,n),uE(t.eventQueue_,e._path,r)}function Lk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ak)}function fp(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),me(n,...e)}function Fk(t,e,n,r){e&&ri(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function hE(t,e,n){return np(t.serverSyncTree_,e,n)||A.EMPTY_NODE}function hp(t,e=t.transactionQueueTree_){if(e||Fc(t,e),ii(e)){let n=gE(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Uk(t,Ho(e),n)}else oE(e)&&kc(e,n=>{hp(t,n)})}function Uk(t,e,n){let r=n.map(l=>l.currentWriteId),i=hE(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ie(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{fp(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Jn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Fc(t,ap(t.transactionQueueTree_,e)),hp(t,t.transactionQueueTree_),$t(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)ri(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ee("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Lc(t,e)}},s)}function Lc(t,e){let n=pE(t,e),r=Ho(n),i=gE(t,n);return jk(t,i,r),r}function jk(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ie(n,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Mk)u=!0,d="maxretry",i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=hE(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){cp("transaction failed: Data returned ",h,c.path);let g=pe(h);typeof h=="object"&&h!=null&&Ct(h,".priority")||(g=g.updatePriority(f.getPriority()));let M=c.currentWriteId,N=up(t),Q=rE(g,f,N);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Q,c.currentWriteId=fE(t),s.splice(s.indexOf(M),1),i=i.concat(XI(t.serverSyncTree_,c.path,Q,c.currentWriteId,c.applyLocally)),i=i.concat(Jn(t.serverSyncTree_,M,!0))}else u=!0,d="nodata",i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0))}$t(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Fc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ri(r[a]);hp(t,t.transactionQueueTree_)}function pE(t,e){let n,r=t.transactionQueueTree_;for(n=P(e);n!==null&&ii(r)===void 0;)r=ap(r,n),e=Y(e),n=P(e);return r}function gE(t,e){let n=[];return mE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mE(t,e,n){let r=ii(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);kc(e,i=>{mE(t,i,n)})}function Fc(t,e){let n=ii(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,iE(e,n.length>0?n:void 0)}kc(e,r=>{Fc(t,r)})}function vE(t,e){let n=Ho(pE(t,e)),r=ap(t.transactionQueueTree_,e);return yk(r,i=>{qf(t,i)}),qf(t,r),sE(r,i=>{qf(t,i)}),n}function qf(t,e){let n=ii(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(m(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(m(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Jn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?iE(e,void 0):n.length=o+1,$t(t.eventQueue_,Ho(e),i);for(let s=0;s<r.length;s++)ri(r[s])}}function Vk(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $k(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ee(`Invalid query segment '${n}' in query '${t}'`)}return e}var lI=function(t,e){let n=Bk(t),r=n.namespace;n.domain==="firebase.com"&&jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EP();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new q(n.pathString)}},Bk=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Vk(t.substring(u,d)));let f=$k(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Ac=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ie(this.snapshot.exportVal())}},Mc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Uh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var jh=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return k(this._path)?null:NI(this._path)}get ref(){return new Bt(this._repo,this._path)}get _queryIdentifier(){let e=Gw(this._queryParams),n=zh(e);return n==="{}"?"default":n}get _queryObject(){return Gw(this._queryParams)}isEqual(e){if(e=Fe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Gh(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+tO(this._path)}};var Bt=class t extends jh{constructor(e,n){super(e,n,new gh,!1)}get parent(){let e=xI(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Nc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new q(e),r=Uo(this.ref,e);return new t(this._node.getChild(n),r,X)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Uo(this.ref,r),X)))}hasChild(e){let n=new q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function yE(t,e){return t=Fe(t),t._checkNotDeleted("ref"),e!==void 0?Uo(t._root,e):t._root}function Uo(t,e){return t=Fe(t),P(t._path)===null?Dk("child","path",e,!1):lE("child","path",e,!1),new Bt(t._repo,se(t._path,e))}function _E(t,e){t=Fe(t),bk("set",t._path),Ck("set",e,t._path,!1);let n=new ln;return Pk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Vh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Ac("value",this,new Nc(e.snapshotNode,new Bt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},$h=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mc(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=Uo(new Bt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Ac(e.type,this,new Nc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Hk(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{cI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Uh(n,o||void 0),a=e==="value"?new Vh(s):new $h(e,s);return kk(t._repo,t,a),()=>cI(t._repo,t,a)}function wE(t,e,n,r){return Hk(t,"value",e,n,r)}KO(Bt);tk(Bt);var Wk="FIREBASE_DATABASE_EMULATOR_HOST",Bh={},zk=!1;function qk(t,e,n,r){t.repoInfo_=new uc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Gk(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),me("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=lI(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Wk]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=lI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Mo(Mo.OWNER):new Jf(t.name,t.options,e);Tk("Invalid Firebase Database URL",s),k(s.path)||jt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=Kk(a,t,u,new Zf(t.name,n));return new Hh(d,t)}function Yk(t,e){let n=Bh[e];(!n||n[t.key]!==t)&&jt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Lk(t),delete n[t.key]}function Kk(t,e,n,r){let i=Bh[e.name];i||(i={},Bh[e.name]=i);let o=i[t.toURLString()];return o&&jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fh(t,zk,n,r),i[t.toURLString()]=o,o}var Hh=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Nk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bt(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Yk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&jt("Cannot call "+e+" on a deleted database.")}};function IE(t=jr(),e){let n=po(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=y_("database");r&&EE(n,...r)}return n}function EE(t,e,n,r={}){t=Fe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&jt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&jt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Mo(Mo.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:__(r.mockUserToken,t.app.options.projectId);o=new Mo(s)}qk(i,e,n,o)}function Qk(t){_P(hn),fn(new Ke("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Gk(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),oe(Nw,Rw,t),oe(Nw,Rw,"esm2017")}Yh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Yh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Qk();var Ht=class{constructor(e){return e}},CE="database",pp=class{constructor(){return go(CE)}};var gp=new E("angularfire2.database-instances");function Zk(t,e){let n=Va(CE,t,e);return n&&new Ht(n)}function Jk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ht(r)}}var Xk={provide:pp,deps:[[new we,gp]]},eL={provide:Ht,useFactory:Zk,deps:[[new we,gp],Lt]},tL=(()=>{class t{constructor(){oe("angularfire",zn.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=mt({type:t});static \u0275inj=yt({providers:[eL,Xk]})}return t})();function DE(t,...e){return{ngModule:tL,providers:[{provide:gp,useFactory:Jk(t),multi:!0,deps:[H,xe,Br,qn,[new we,Eo],[new we,$r],...e]}]}}var bE=kt(IE,!0);var TE=kt(wE,!0);var mp=kt(yE,!0);var SE=kt(_E,!0);var AE=(()=>{let e=class e{constructor(){this.temp=0,this.database=v(Ht),this.loadData()}increment(){this.temp++,this.saveData()}decrement(){this.temp--,this.saveData()}saveData(){let r=mp(this.database,"temperatura");SE(r,this.temp).then(()=>console.log("Dados salvos com sucesso:",this.temp)).catch(i=>console.error("Erro ao salvar dados:",i))}loadData(){let r=mp(this.database,"temperatura");TE(r,i=>{let o=i.val();o!==null&&(this.temp=o,console.log("Dados carregados com sucesso:",this.temp))},{onlyOnce:!0})}salvar(){this.saveData()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gt({type:e,selectors:[["app-diagram"]],standalone:!0,features:[_t],decls:11,vars:1,consts:[[3,"click"]],template:function(i,o){i&1&&(K(0,"div")(1,"h1"),ke(2,"Controle de Temperatura"),ne(),K(3,"p"),ke(4),ne(),K(5,"button",0),Oe("click",function(){return o.increment()}),ke(6,"Incrementar"),ne(),K(7,"button",0),Oe("click",function(){return o.decrement()}),ke(8,"Decrementar"),ne(),K(9,"button",0),Oe("click",function(){return o.salvar()}),ke(10,"Salvar"),ne()()),i&2&&(gv(4),Ru("Temperatura Atual: ",o.temp,""))},styles:["div[_ngcontent-%COMP%]{text-align:center;margin-top:50px}h1[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:20px}p[_ngcontent-%COMP%]{font-size:20px;color:#666;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 20px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:5px;cursor:pointer;border-radius:4px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let t=e;return t})();var ME=(()=>{let e=class e{constructor(r){this.router=r}open(){let i=document.getElementsByName("codigo")[0].value;i==="123"&&this.router.navigate(["/diagram"])}};e.\u0275fac=function(i){return new(i||e)(xi(Ra))},e.\u0275cmp=gt({type:e,selectors:[["app-home"]],standalone:!0,features:[_t],decls:9,vars:0,consts:[[1,"fadein"],["type","text","name","codigo"],["type","submit","name","acao","value","Enviar",3,"click"]],template:function(i,o){i&1&&(K(0,"main",0)(1,"h1"),ke(2,"Geladeira Inteligente ProActive"),ne(),K(3,"form")(4,"h3"),ke(5,"C\xF3digo:"),ne(),Pe(6,"input",1),K(7,"input",2),Oe("click",function(){return o.open()}),ne()()(),Pe(8,"app-footer"))},dependencies:[h_],styles:["h1[_ngcontent-%COMP%]{font-size:3.25rem;font-weight:500;letter-spacing:-.125rem;font-family:Inter Tight;margin-top:8rem;text-align:center}h3[_ngcontent-%COMP%]{letter-spacing:.125rem;font-family:Inter Tight}form[_ngcontent-%COMP%]{max-width:400px;width:60%;padding:20px;position:absolute;left:50%;right:50%;transform:translate(-50%,-50%);margin-top:11rem;text-align:center;background-color:#faebd7;border-radius:15px}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:90%;height:45px;border:1px solid white;padding-left:10px;margin:10px 0}form[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{width:50%;height:30px;margin-top:2rem;cursor:pointer;background-color:#deb887;border:0;border-radius:20px;letter-spacing:.125rem;font-family:Inter Tight;font-weight:600}form[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background-color:#a58355}.fadein[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]});let t=e;return t})();var NE=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"diagram",component:AE},{path:"home",component:ME}];var RE={providers:[f_(NE),xy(),Ri(B_(()=>H_({projectId:"proactive-ae334",appId:"1:98316423271:web:594349f7713fdbd0f8c4c2",databaseURL:"https://proactive-ae334-default-rtdb.firebaseio.com",storageBucket:"proactive-ae334.appspot.com",apiKey:"AIzaSyDuCIrTT_CQjwBTzwdqT8exzWlqmqrs2ao",authDomain:"proactive-ae334.firebaseapp.com",messagingSenderId:"98316423271"}))),Ri(Aw(()=>Mw())),Ri(DE(()=>bE()))]};var xE=(()=>{let e=class e{constructor(){this.title="GeladeiraInteligente",this.database=v(Ht)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gt({type:e,selectors:[["app-root"]],standalone:!0,features:[_t],decls:1,vars:0,template:function(i,o){i&1&&Pe(0,"router-outlet")},dependencies:[ku,Td]});let t=e;return t})();Ny(xE,RE).catch(t=>console.error(t));
